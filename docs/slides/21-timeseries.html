<!DOCTYPE html>
<html lang="en"><head>
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <title>ESS 330 – Lecture 21</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-be8ed9a3cdcbe7a498a633334f8d1033.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
  <link href="../site_libs/htmltools-fill-0.5.8.1/fill.css" rel="stylesheet">
  <script src="../site_libs/htmlwidgets-1.6.4/htmlwidgets.js"></script>
  <script src="../site_libs/plotly-binding-4.10.4/plotly.js"></script>
  <script src="../site_libs/typedarray-0.1/typedarray.min.js"></script>
  <script src="../site_libs/jquery-3.5.1/jquery.min.js"></script>
  <link href="../site_libs/crosstalk-1.2.1/css/crosstalk.min.css" rel="stylesheet">
  <script src="../site_libs/crosstalk-1.2.1/js/crosstalk.min.js"></script>
  <link href="../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css" rel="stylesheet">
  <script src="../site_libs/plotly-main-2.11.1/plotly-latest.min.js"></script>
</head>
<body class="quarto-light">
<script src="https://use.fontawesome.com/5235085b15.js"></script>
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#1E4D2B" class="quarto-title-block center">
  <h1 class="title">Lecture 21</h1>
  <p class="subtitle">Introduction to Time Series Data in R</p>

<div class="quarto-title-authors">
</div>

</section>
<section id="learning-objectives" class="slide level2">
<h2>Learning Objectives</h2>
<p>By the end of this lecture, you should be able to:</p>
<ul>
<li>Understand what time series data is and why it’s useful</li>
<li>Work with date and time objects in R</li>
<li>Load and visualize time series data in R</li>
<li>Apply basic time series operations: decomposition, smoothing, and forecasting</li>
<li>Use <code>ts</code>, <code>zoo</code>, and <code>xts</code> objects for time-indexed data</li>
<li>Understand tidy approaches using <code>tsibble</code> and <code>feasts</code></li>
<li>Recognize real-world environmental science applications of time series</li>
</ul>
</section>
<section id="what-is-time-series-data" class="slide level2">
<h2>What is Time Series Data?</h2>
<p>Time series data is a collection of observations recorded sequentially over time. Unlike other data types, time series data is <strong>ordered</strong>, and that order carries critical information.</p>
<h4 id="examples">Examples:</h4>
<ul>
<li>Streamflow measurements (e.g., daily CFS at a USGS gage)</li>
<li>Atmospheric CO₂ levels (e.g., Mauna Loa Observatory)</li>
<li>Snowpack depth over time</li>
<li>Urban water consumption by month</li>
</ul>
<h4 id="why-time-series-matter">Why Time Series Matter</h4>
<p>Time series analysis helps us:</p>
<ul>
<li>Understand trends and patterns</li>
<li>Detect anomalies (e.g., droughts, sensor failures)</li>
<li>Forecast future values (e.g., streamflow, temperature)</li>
</ul>
</section>
<section id="working-with-date-objects-in-r" class="slide level2">
<h2>Working with Date Objects in R</h2>
<ul>
<li><p>Time series analysis depends on accurate and well-formatted date/time information.</p></li>
<li><p>Before we can analyis time series data, we need to understand how R handles dates and times.</p></li>
<li><p>R has built-in classes for date and time objects, which are essential for time series analysis.</p></li>
</ul>
</section>
<section id="base-r-date-functions" class="slide level2">
<h2>Base R Date Functions</h2>
<p>R has several native classes for handling dates and times:</p>
<ul>
<li><strong>Date</strong>: Date object</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">as.Date</span>(<span class="st">"2024-04-08"</span>)</span>
<span id="cb1-2"><a></a><span class="co">#&gt; [1] "2024-04-08"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>POSIXct</strong>: Date and time</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="fu">as.POSIXct</span>(<span class="st">"2024-04-08 14:30:00"</span>)</span>
<span id="cb2-2"><a></a><span class="co">#&gt; [1] "2024-04-08 14:30:00 MDT"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><strong>POSIXlt</strong>: List of date and time components</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>(lt <span class="ot">&lt;-</span> <span class="fu">as.POSIXlt</span>(<span class="st">"2024-04-08 14:30:00"</span>))</span>
<span id="cb3-2"><a></a><span class="co">#&gt; [1] "2024-04-08 14:30:00 MDT"</span></span>
<span id="cb3-3"><a></a></span>
<span id="cb3-4"><a></a>lt<span class="sc">$</span>hour</span>
<span id="cb3-5"><a></a><span class="co">#&gt; [1] 14</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="date-sequences" class="slide level2">
<h2>Date Sequences</h2>
<p>You can create sequences of dates using the <code>seq.Date()</code> function:</p>
<ul>
<li><code>from</code>: Start date</li>
<li><code>to</code>: End date (optional)</li>
<li><code>by</code>: Interval (e.g., “day”, “month”, “year”)</li>
<li><code>length.out</code>: Number of dates to generate</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a><span class="fu">seq.Date</span>(<span class="at">from =</span> <span class="fu">as.Date</span>(<span class="st">"2024-01-01"</span>), <span class="at">by =</span> <span class="st">"month"</span>, <span class="at">length.out =</span> <span class="dv">12</span>)</span>
<span id="cb4-2"><a></a><span class="co">#&gt;  [1] "2024-01-01" "2024-02-01" "2024-03-01" "2024-04-01" "2024-05-01"</span></span>
<span id="cb4-3"><a></a><span class="co">#&gt;  [6] "2024-06-01" "2024-07-01" "2024-08-01" "2024-09-01" "2024-10-01"</span></span>
<span id="cb4-4"><a></a><span class="co">#&gt; [11] "2024-11-01" "2024-12-01"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section" class="slide level2">
<h2></h2>
<p>You can also use <code>seq()</code> to create sequences of POSIXct/lt objects:</p>
<ul>
<li><code>from</code>: Start date/time</li>
<li><code>to</code>: End date/time (optional)</li>
<li><code>by</code>: Interval (e.g., “hour”, “minute”, “second”)</li>
<li><code>length.out</code>: Number of dates to generate</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="fu">seq</span>(<span class="at">from =</span> <span class="fu">as.POSIXct</span>(<span class="st">"2024-01-01 00:00"</span>), </span>
<span id="cb5-2"><a></a>    <span class="at">to =</span> <span class="fu">as.POSIXct</span>(<span class="st">"2024-01-02 00:00"</span>), </span>
<span id="cb5-3"><a></a>    <span class="at">by =</span> <span class="st">"hour"</span>)</span>
<span id="cb5-4"><a></a><span class="co">#&gt;  [1] "2024-01-01 00:00:00 MST" "2024-01-01 01:00:00 MST"</span></span>
<span id="cb5-5"><a></a><span class="co">#&gt;  [3] "2024-01-01 02:00:00 MST" "2024-01-01 03:00:00 MST"</span></span>
<span id="cb5-6"><a></a><span class="co">#&gt;  [5] "2024-01-01 04:00:00 MST" "2024-01-01 05:00:00 MST"</span></span>
<span id="cb5-7"><a></a><span class="co">#&gt;  [7] "2024-01-01 06:00:00 MST" "2024-01-01 07:00:00 MST"</span></span>
<span id="cb5-8"><a></a><span class="co">#&gt;  [9] "2024-01-01 08:00:00 MST" "2024-01-01 09:00:00 MST"</span></span>
<span id="cb5-9"><a></a><span class="co">#&gt; [11] "2024-01-01 10:00:00 MST" "2024-01-01 11:00:00 MST"</span></span>
<span id="cb5-10"><a></a><span class="co">#&gt; [13] "2024-01-01 12:00:00 MST" "2024-01-01 13:00:00 MST"</span></span>
<span id="cb5-11"><a></a><span class="co">#&gt; [15] "2024-01-01 14:00:00 MST" "2024-01-01 15:00:00 MST"</span></span>
<span id="cb5-12"><a></a><span class="co">#&gt; [17] "2024-01-01 16:00:00 MST" "2024-01-01 17:00:00 MST"</span></span>
<span id="cb5-13"><a></a><span class="co">#&gt; [19] "2024-01-01 18:00:00 MST" "2024-01-01 19:00:00 MST"</span></span>
<span id="cb5-14"><a></a><span class="co">#&gt; [21] "2024-01-01 20:00:00 MST" "2024-01-01 21:00:00 MST"</span></span>
<span id="cb5-15"><a></a><span class="co">#&gt; [23] "2024-01-01 22:00:00 MST" "2024-01-01 23:00:00 MST"</span></span>
<span id="cb5-16"><a></a><span class="co">#&gt; [25] "2024-01-02 00:00:00 MST"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="timezones" class="slide level2">
<h2>Timezones</h2>
<ul>
<li><p>By default, R uses the system’s timezone.</p></li>
<li><p>The <code>Sys.timezone()</code> function returns the current timezone.</p></li>
<li><p>If you want to use anthor timezone, say GMT/UTC, you can change it:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="fu">Sys.timezone</span>()</span>
<span id="cb6-2"><a></a><span class="co">#&gt; [1] "America/Denver"</span></span>
<span id="cb6-3"><a></a></span>
<span id="cb6-4"><a></a><span class="fu">as.POSIXct</span>(<span class="st">"2024-04-08 14:30:00"</span>, <span class="at">tz =</span> <span class="st">"GMT"</span>)</span>
<span id="cb6-5"><a></a><span class="co">#&gt; [1] "2024-04-08 14:30:00 GMT"</span></span>
<span id="cb6-6"><a></a></span>
<span id="cb6-7"><a></a>(<span class="at">obj =</span> <span class="fu">as.POSIXct</span>(<span class="st">"2024-04-08 14:30:00"</span>))</span>
<span id="cb6-8"><a></a><span class="co">#&gt; [1] "2024-04-08 14:30:00 MDT"</span></span>
<span id="cb6-9"><a></a></span>
<span id="cb6-10"><a></a><span class="fu">format</span>(obj, <span class="at">tz =</span> <span class="st">"EST"</span>)</span>
<span id="cb6-11"><a></a><span class="co">#&gt; [1] "2024-04-08 15:30:00"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="lubridate-package" class="slide level2">
<h2>lubridate Package <img data-src="hexes/lubridate.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<ul>
<li><p>The <code>lubridate</code> package comes with the <code>tidyverse</code> and is designed to make working with dates and times easier.</p></li>
<li><p>It provides a consistent set of functions for parsing, manipulating, and formatting date-time objects.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="fu">library</span>(lubridate)</span>
<span id="cb7-2"><a></a><span class="fu">ymd</span>(<span class="st">"20240408"</span>)        <span class="co"># Parse date</span></span>
<span id="cb7-3"><a></a><span class="co">#&gt; [1] "2024-04-08"</span></span>
<span id="cb7-4"><a></a><span class="fu">ymd_hms</span>(<span class="st">"20240408 123000"</span>)</span>
<span id="cb7-5"><a></a><span class="co">#&gt; [1] "2024-04-08 12:30:00 UTC"</span></span>
<span id="cb7-6"><a></a></span>
<span id="cb7-7"><a></a><span class="fu">now</span>()                  <span class="co"># Current date and time</span></span>
<span id="cb7-8"><a></a><span class="co">#&gt; [1] "2025-04-14 09:27:31 MDT"</span></span>
<span id="cb7-9"><a></a>date <span class="ot">&lt;-</span> <span class="fu">ymd</span>(<span class="st">"2023-12-01"</span>)</span>
<span id="cb7-10"><a></a><span class="fu">month</span>(date)           <span class="co"># Extract month</span></span>
<span id="cb7-11"><a></a><span class="co">#&gt; [1] 12</span></span>
<span id="cb7-12"><a></a><span class="fu">day</span>(date)</span>
<span id="cb7-13"><a></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb7-14"><a></a><span class="fu">week</span>(date)</span>
<span id="cb7-15"><a></a><span class="co">#&gt; [1] 48</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Use <code>lubridate</code> to handle inconsistent formats and to align data with time zones, daylight savings, etc.</p>
</section>
<section id="lubridate-timezones" class="slide level2">
<h2>lubridate timezones <img data-src="hexes/lubridate.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<p>lubridate also provides functions for working with time zones. You can convert between time zones using <code>with_tz()</code> and <code>force_tz()</code>.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>(date <span class="ot">&lt;-</span> <span class="fu">ymd_hms</span>(<span class="st">"2024-04-08 14:30:00"</span>, <span class="at">tz =</span> <span class="st">"America/New_York"</span>))</span>
<span id="cb8-2"><a></a><span class="co">#&gt; [1] "2024-04-08 14:30:00 EDT"</span></span>
<span id="cb8-3"><a></a></span>
<span id="cb8-4"><a></a><span class="co"># Change time zone without changing time</span></span>
<span id="cb8-5"><a></a><span class="fu">force_tz</span>(date, <span class="st">"America/Los_Angeles"</span>)  </span>
<span id="cb8-6"><a></a><span class="co">#&gt; [1] "2024-04-08 14:30:00 PDT"</span></span>
<span id="cb8-7"><a></a></span>
<span id="cb8-8"><a></a><span class="co"># Convert to another timezone</span></span>
<span id="cb8-9"><a></a><span class="fu">with_tz</span>(date, <span class="st">"America/Los_Angeles"</span>)  </span>
<span id="cb8-10"><a></a><span class="co">#&gt; [1] "2024-04-08 11:30:00 PDT"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="r-packages-for-time-series" class="slide level2">
<h2>R Packages for Time Series</h2>
<p>R has several packages/systme for time series analysis, including:</p>
<ul>
<li><p><code>ts</code>: Base R time series class</p></li>
<li><p><code>zoo</code>: Provides a flexible class for ordered observations</p></li>
<li><p><code>xts</code>: Extensible time series class for irregularly spaced data</p></li>
<li><p><code>forecast</code>: Functions for forecasting time series data</p></li>
<li><p><code>tsibble</code>: Tidy time series data frames</p></li>
<li><p><code>feasts</code>: Functions for time series analysis and visualization</p></li>
<li><p><code>modeltime</code>: Time series modeling with tidymodels</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb9-2"><a></a><span class="fu">library</span>(zoo)</span>
<span id="cb9-3"><a></a><span class="fu">library</span>(tsibble)</span>
<span id="cb9-4"><a></a><span class="fu">library</span>(feasts)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="when-to-use-which-time-series-format" class="slide level2">
<h2>When to Use Which Time Series Format?</h2>
<table class="caption-top">
<colgroup>
<col style="width: 11%">
<col style="width: 22%">
<col style="width: 37%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th>Format</th>
<th>Best For</th>
<th>Advantages</th>
<th>Limitations</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td><code>ts</code></td>
<td>Regular, simple time series</td>
<td>Built into base R, supported by <code>forecast</code></td>
<td>Rigid time format, inflexible for joins</td>
</tr>
<tr class="even">
<td><code>zoo</code></td>
<td>Irregular time steps</td>
<td>Arbitrary index, supports irregular data</td>
<td>More complex syntax</td>
</tr>
<tr class="odd">
<td><code>xts</code></td>
<td>Financial-style or irregular data</td>
<td>Good for date-time indexing and joins</td>
<td>More complex to visualize</td>
</tr>
<tr class="even">
<td><code>tsibble</code></td>
<td>Tidyverse workflows</td>
<td>Pipes with <code>dplyr</code>, <code>ggplot2</code>, forecasting with <code>fable</code></td>
<td>Requires <code>tsibble</code> structure</td>
</tr>
<tr class="odd">
<td><code>tibble</code> + <code>Date</code></td>
<td>General purpose</td>
<td>Flexible, tidy</td>
<td>Needs conversion for time series modeling</td>
</tr>
</tbody>
</table>
</section>
<section id="key-concepts-in-time-series" class="slide level2">
<h2>Key Concepts in Time Series</h2>
<ul>
<li><p><strong>1. Trend</strong>: Long-term increase or decrease in the data</p></li>
<li><p><strong>2. Seasonality</strong>: Repeating short-term cycle (e.g., annual snowmelt)</p></li>
<li><p><strong>3. Noise</strong>: Random variation</p></li>
<li><p><strong>4. Stationarity</strong>: Statistical properties (mean, variance) don’t change over time</p></li>
<li><p><strong>5. Autocorrelation</strong>: Correlation of a time series with its own past values</p></li>
</ul>
</section>
<section id="introducing-the-mauna-loa-co₂-dataset" class="slide level2" data-background-image="images/mauna-loa.jpeg">
<h2>Introducing the Mauna Loa CO₂ Dataset</h2>
</section>
<section id="mauna-loa-co₂-dataset" class="slide level2 smaller">
<h2>Mauna Loa CO₂ Dataset</h2>
<ul>
<li><p>The <code>co2</code> dataset is a classic example of time series data. It contains monthly atmospheric CO₂ concentrations measured at the Mauna Loa Observatory in Hawaii.</p></li>
<li><p><code>co2</code> is a built-in dataset representing monthly CO₂ concentrations from 1959 onward.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a><span class="fu">class</span>(co2)</span>
<span id="cb10-2"><a></a><span class="co">#&gt; [1] "ts"</span></span>
<span id="cb10-3"><a></a>co2</span>
<span id="cb10-4"><a></a><span class="co">#&gt;         Jan    Feb    Mar    Apr    May    Jun    Jul    Aug    Sep    Oct</span></span>
<span id="cb10-5"><a></a><span class="co">#&gt; 1959 315.42 316.31 316.50 317.56 318.13 318.00 316.39 314.65 313.68 313.18</span></span>
<span id="cb10-6"><a></a><span class="co">#&gt; 1960 316.27 316.81 317.42 318.87 319.87 319.43 318.01 315.74 314.00 313.68</span></span>
<span id="cb10-7"><a></a><span class="co">#&gt; 1961 316.73 317.54 318.38 319.31 320.42 319.61 318.42 316.63 314.83 315.16</span></span>
<span id="cb10-8"><a></a><span class="co">#&gt; 1962 317.78 318.40 319.53 320.42 320.85 320.45 319.45 317.25 316.11 315.27</span></span>
<span id="cb10-9"><a></a><span class="co">#&gt; 1963 318.58 318.92 319.70 321.22 322.08 321.31 319.58 317.61 316.05 315.83</span></span>
<span id="cb10-10"><a></a><span class="co">#&gt; 1964 319.41 320.07 320.74 321.40 322.06 321.73 320.27 318.54 316.54 316.71</span></span>
<span id="cb10-11"><a></a><span class="co">#&gt; 1965 319.27 320.28 320.73 321.97 322.00 321.71 321.05 318.71 317.66 317.14</span></span>
<span id="cb10-12"><a></a><span class="co">#&gt; 1966 320.46 321.43 322.23 323.54 323.91 323.59 322.24 320.20 318.48 317.94</span></span>
<span id="cb10-13"><a></a><span class="co">#&gt; 1967 322.17 322.34 322.88 324.25 324.83 323.93 322.38 320.76 319.10 319.24</span></span>
<span id="cb10-14"><a></a><span class="co">#&gt; 1968 322.40 322.99 323.73 324.86 325.40 325.20 323.98 321.95 320.18 320.09</span></span>
<span id="cb10-15"><a></a><span class="co">#&gt; 1969 323.83 324.26 325.47 326.50 327.21 326.54 325.72 323.50 322.22 321.62</span></span>
<span id="cb10-16"><a></a><span class="co">#&gt; 1970 324.89 325.82 326.77 327.97 327.91 327.50 326.18 324.53 322.93 322.90</span></span>
<span id="cb10-17"><a></a><span class="co">#&gt; 1971 326.01 326.51 327.01 327.62 328.76 328.40 327.20 325.27 323.20 323.40</span></span>
<span id="cb10-18"><a></a><span class="co">#&gt; 1972 326.60 327.47 327.58 329.56 329.90 328.92 327.88 326.16 324.68 325.04</span></span>
<span id="cb10-19"><a></a><span class="co">#&gt; 1973 328.37 329.40 330.14 331.33 332.31 331.90 330.70 329.15 327.35 327.02</span></span>
<span id="cb10-20"><a></a><span class="co">#&gt; 1974 329.18 330.55 331.32 332.48 332.92 332.08 331.01 329.23 327.27 327.21</span></span>
<span id="cb10-21"><a></a><span class="co">#&gt; 1975 330.23 331.25 331.87 333.14 333.80 333.43 331.73 329.90 328.40 328.17</span></span>
<span id="cb10-22"><a></a><span class="co">#&gt; 1976 331.58 332.39 333.33 334.41 334.71 334.17 332.89 330.77 329.14 328.78</span></span>
<span id="cb10-23"><a></a><span class="co">#&gt; 1977 332.75 333.24 334.53 335.90 336.57 336.10 334.76 332.59 331.42 330.98</span></span>
<span id="cb10-24"><a></a><span class="co">#&gt; 1978 334.80 335.22 336.47 337.59 337.84 337.72 336.37 334.51 332.60 332.38</span></span>
<span id="cb10-25"><a></a><span class="co">#&gt; 1979 336.05 336.59 337.79 338.71 339.30 339.12 337.56 335.92 333.75 333.70</span></span>
<span id="cb10-26"><a></a><span class="co">#&gt; 1980 337.84 338.19 339.91 340.60 341.29 341.00 339.39 337.43 335.72 335.84</span></span>
<span id="cb10-27"><a></a><span class="co">#&gt; 1981 339.06 340.30 341.21 342.33 342.74 342.08 340.32 338.26 336.52 336.68</span></span>
<span id="cb10-28"><a></a><span class="co">#&gt; 1982 340.57 341.44 342.53 343.39 343.96 343.18 341.88 339.65 337.81 337.69</span></span>
<span id="cb10-29"><a></a><span class="co">#&gt; 1983 341.20 342.35 342.93 344.77 345.58 345.14 343.81 342.21 339.69 339.82</span></span>
<span id="cb10-30"><a></a><span class="co">#&gt; 1984 343.52 344.33 345.11 346.88 347.25 346.62 345.22 343.11 340.90 341.18</span></span>
<span id="cb10-31"><a></a><span class="co">#&gt; 1985 344.79 345.82 347.25 348.17 348.74 348.07 346.38 344.51 342.92 342.62</span></span>
<span id="cb10-32"><a></a><span class="co">#&gt; 1986 346.11 346.78 347.68 349.37 350.03 349.37 347.76 345.73 344.68 343.99</span></span>
<span id="cb10-33"><a></a><span class="co">#&gt; 1987 347.84 348.29 349.23 350.80 351.66 351.07 349.33 347.92 346.27 346.18</span></span>
<span id="cb10-34"><a></a><span class="co">#&gt; 1988 350.25 351.54 352.05 353.41 354.04 353.62 352.22 350.27 348.55 348.72</span></span>
<span id="cb10-35"><a></a><span class="co">#&gt; 1989 352.60 352.92 353.53 355.26 355.52 354.97 353.75 351.52 349.64 349.83</span></span>
<span id="cb10-36"><a></a><span class="co">#&gt; 1990 353.50 354.55 355.23 356.04 357.00 356.07 354.67 352.76 350.82 351.04</span></span>
<span id="cb10-37"><a></a><span class="co">#&gt; 1991 354.59 355.63 357.03 358.48 359.22 358.12 356.06 353.92 352.05 352.11</span></span>
<span id="cb10-38"><a></a><span class="co">#&gt; 1992 355.88 356.63 357.72 359.07 359.58 359.17 356.94 354.92 352.94 353.23</span></span>
<span id="cb10-39"><a></a><span class="co">#&gt; 1993 356.63 357.10 358.32 359.41 360.23 359.55 357.53 355.48 353.67 353.95</span></span>
<span id="cb10-40"><a></a><span class="co">#&gt; 1994 358.34 358.89 359.95 361.25 361.67 360.94 359.55 357.49 355.84 356.00</span></span>
<span id="cb10-41"><a></a><span class="co">#&gt; 1995 359.98 361.03 361.66 363.48 363.82 363.30 361.94 359.50 358.11 357.80</span></span>
<span id="cb10-42"><a></a><span class="co">#&gt; 1996 362.09 363.29 364.06 364.76 365.45 365.01 363.70 361.54 359.51 359.65</span></span>
<span id="cb10-43"><a></a><span class="co">#&gt; 1997 363.23 364.06 364.61 366.40 366.84 365.68 364.52 362.57 360.24 360.83</span></span>
<span id="cb10-44"><a></a><span class="co">#&gt;         Nov    Dec</span></span>
<span id="cb10-45"><a></a><span class="co">#&gt; 1959 314.66 315.43</span></span>
<span id="cb10-46"><a></a><span class="co">#&gt; 1960 314.84 316.03</span></span>
<span id="cb10-47"><a></a><span class="co">#&gt; 1961 315.94 316.85</span></span>
<span id="cb10-48"><a></a><span class="co">#&gt; 1962 316.53 317.53</span></span>
<span id="cb10-49"><a></a><span class="co">#&gt; 1963 316.91 318.20</span></span>
<span id="cb10-50"><a></a><span class="co">#&gt; 1964 317.53 318.55</span></span>
<span id="cb10-51"><a></a><span class="co">#&gt; 1965 318.70 319.25</span></span>
<span id="cb10-52"><a></a><span class="co">#&gt; 1966 319.63 320.87</span></span>
<span id="cb10-53"><a></a><span class="co">#&gt; 1967 320.56 321.80</span></span>
<span id="cb10-54"><a></a><span class="co">#&gt; 1968 321.16 322.74</span></span>
<span id="cb10-55"><a></a><span class="co">#&gt; 1969 322.69 323.95</span></span>
<span id="cb10-56"><a></a><span class="co">#&gt; 1970 323.85 324.96</span></span>
<span id="cb10-57"><a></a><span class="co">#&gt; 1971 324.63 325.85</span></span>
<span id="cb10-58"><a></a><span class="co">#&gt; 1972 326.34 327.39</span></span>
<span id="cb10-59"><a></a><span class="co">#&gt; 1973 327.99 328.48</span></span>
<span id="cb10-60"><a></a><span class="co">#&gt; 1974 328.29 329.41</span></span>
<span id="cb10-61"><a></a><span class="co">#&gt; 1975 329.32 330.59</span></span>
<span id="cb10-62"><a></a><span class="co">#&gt; 1976 330.14 331.52</span></span>
<span id="cb10-63"><a></a><span class="co">#&gt; 1977 332.24 333.68</span></span>
<span id="cb10-64"><a></a><span class="co">#&gt; 1978 333.75 334.78</span></span>
<span id="cb10-65"><a></a><span class="co">#&gt; 1979 335.12 336.56</span></span>
<span id="cb10-66"><a></a><span class="co">#&gt; 1980 336.93 338.04</span></span>
<span id="cb10-67"><a></a><span class="co">#&gt; 1981 338.19 339.44</span></span>
<span id="cb10-68"><a></a><span class="co">#&gt; 1982 339.09 340.32</span></span>
<span id="cb10-69"><a></a><span class="co">#&gt; 1983 340.98 342.82</span></span>
<span id="cb10-70"><a></a><span class="co">#&gt; 1984 342.80 344.04</span></span>
<span id="cb10-71"><a></a><span class="co">#&gt; 1985 344.06 345.38</span></span>
<span id="cb10-72"><a></a><span class="co">#&gt; 1986 345.48 346.72</span></span>
<span id="cb10-73"><a></a><span class="co">#&gt; 1987 347.64 348.78</span></span>
<span id="cb10-74"><a></a><span class="co">#&gt; 1988 349.91 351.18</span></span>
<span id="cb10-75"><a></a><span class="co">#&gt; 1989 351.14 352.37</span></span>
<span id="cb10-76"><a></a><span class="co">#&gt; 1990 352.69 354.07</span></span>
<span id="cb10-77"><a></a><span class="co">#&gt; 1991 353.64 354.89</span></span>
<span id="cb10-78"><a></a><span class="co">#&gt; 1992 354.09 355.33</span></span>
<span id="cb10-79"><a></a><span class="co">#&gt; 1993 355.30 356.78</span></span>
<span id="cb10-80"><a></a><span class="co">#&gt; 1994 357.59 359.05</span></span>
<span id="cb10-81"><a></a><span class="co">#&gt; 1995 359.61 360.74</span></span>
<span id="cb10-82"><a></a><span class="co">#&gt; 1996 360.80 362.38</span></span>
<span id="cb10-83"><a></a><span class="co">#&gt; 1997 362.49 364.34</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="initial-plot" class="slide level2">
<h2>Initial Plot</h2>
<ul>
<li><p>The <code>co2</code> dataset is a time series object (<code>ts</code>) with 12 observations per year, starting from January 1959.</p></li>
<li><p>There is a default plot method for <code>ts</code> objects that we can take advantage of:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a><span class="fu">plot</span>(co2, <span class="at">main =</span> <span class="st">"Atmospheric CO2 at Mauna Loa"</span>, <span class="at">ylab =</span> <span class="st">"ppm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-11-1.png" style="width:100.0%" class="r-stretch"><p>We see:</p>
<ul>
<li>An upward <strong>trend</strong></li>
<li>Regular <strong>seasonal oscillations</strong> (higher in winter, lower in summer)</li>
</ul>
</section>
<section id="understanding-ts-objects" class="slide level2">
<h2>Understanding <code>ts</code> Objects</h2>
<p>You can think of <code>ts</code> objects as numeric vectors with time attributes.</p>
<ul>
<li><p><code>ts</code> objects are used to represent time series data and are created using the <code>ts()</code> function.</p></li>
<li><p>They have attributes like <code>start</code>, <code>end</code>, and <code>frequency</code> that define the time index.</p></li>
<li><p><code>start</code> and <code>end</code> define the time range of the data.</p></li>
<li><p><code>frequency</code> defines the number of observations per unit of time (e.g., 12 for monthly data).</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a><span class="fu">class</span>(co2)    </span>
<span id="cb12-2"><a></a><span class="co">#&gt; [1] "ts"</span></span>
<span id="cb12-3"><a></a><span class="fu">start</span>(co2)    </span>
<span id="cb12-4"><a></a><span class="co">#&gt; [1] 1959    1</span></span>
<span id="cb12-5"><a></a><span class="fu">end</span>(co2)      </span>
<span id="cb12-6"><a></a><span class="co">#&gt; [1] 1997   12</span></span>
<span id="cb12-7"><a></a><span class="fu">frequency</span>(co2)</span>
<span id="cb12-8"><a></a><span class="co">#&gt; [1] 12</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="subsetting-and-plotting" class="slide level2">
<h2>Subsetting and Plotting</h2>
<ul>
<li><p>Like vectors, you can subset <code>ts</code> objects using indexing.</p></li>
<li><p>For example, to extract the first year of data:</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a>co2[<span class="dv">1</span><span class="sc">:</span><span class="dv">12</span>]  <span class="co"># First year</span></span>
<span id="cb13-2"><a></a><span class="co">#&gt;  [1] 315.42 316.31 316.50 317.56 318.13 318.00 316.39 314.65 313.68 313.18</span></span>
<span id="cb13-3"><a></a><span class="co">#&gt; [11] 314.66 315.43</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<ul>
<li>Or, a specific range of years:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a><span class="fu">window</span>(co2, <span class="at">start =</span> <span class="fu">c</span>(<span class="dv">1990</span>, <span class="dv">1</span>), <span class="at">end =</span> <span class="fu">c</span>(<span class="dv">1995</span>, <span class="dv">12</span>))</span>
<span id="cb14-2"><a></a><span class="co">#&gt;         Jan    Feb    Mar    Apr    May    Jun    Jul    Aug    Sep    Oct</span></span>
<span id="cb14-3"><a></a><span class="co">#&gt; 1990 353.50 354.55 355.23 356.04 357.00 356.07 354.67 352.76 350.82 351.04</span></span>
<span id="cb14-4"><a></a><span class="co">#&gt; 1991 354.59 355.63 357.03 358.48 359.22 358.12 356.06 353.92 352.05 352.11</span></span>
<span id="cb14-5"><a></a><span class="co">#&gt; 1992 355.88 356.63 357.72 359.07 359.58 359.17 356.94 354.92 352.94 353.23</span></span>
<span id="cb14-6"><a></a><span class="co">#&gt; 1993 356.63 357.10 358.32 359.41 360.23 359.55 357.53 355.48 353.67 353.95</span></span>
<span id="cb14-7"><a></a><span class="co">#&gt; 1994 358.34 358.89 359.95 361.25 361.67 360.94 359.55 357.49 355.84 356.00</span></span>
<span id="cb14-8"><a></a><span class="co">#&gt; 1995 359.98 361.03 361.66 363.48 363.82 363.30 361.94 359.50 358.11 357.80</span></span>
<span id="cb14-9"><a></a><span class="co">#&gt;         Nov    Dec</span></span>
<span id="cb14-10"><a></a><span class="co">#&gt; 1990 352.69 354.07</span></span>
<span id="cb14-11"><a></a><span class="co">#&gt; 1991 353.64 354.89</span></span>
<span id="cb14-12"><a></a><span class="co">#&gt; 1992 354.09 355.33</span></span>
<span id="cb14-13"><a></a><span class="co">#&gt; 1993 355.30 356.78</span></span>
<span id="cb14-14"><a></a><span class="co">#&gt; 1994 357.59 359.05</span></span>
<span id="cb14-15"><a></a><span class="co">#&gt; 1995 359.61 360.74</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="decomposing-a-time-series" class="slide level2">
<h2>Decomposing a Time Series</h2>
<ul>
<li><p>Decomposition is a technique to separate a time series into its components: trend, seasonality, and residuals.</p></li>
<li><p>This helps separate structure from noise.</p></li>
<li><p>In environmental science, this is useful for:</p></li>
<li><p>Removing seasonality to study droughts</p></li>
<li><p>Analyzing long-term trends</p></li>
<li><p>Understanding seasonal patterns in streamflow</p></li>
<li><p>Identifying anomalies in water quality data</p></li>
<li><p>Detecting changes in vegetation phenology</p></li>
<li><p>Monitoring seasonal patterns in temperature</p></li>
<li><p>Analyzing seasonal patterns in water demand</p></li>
<li><p>…</p></li>
</ul>
</section>
<section id="what-is-decomposition" class="slide level2">
<h2>What is Decomposition?</h2>
<blockquote>
<p><strong>Decomposition</strong> separates a time series into interpretable components:</p>
</blockquote>
<ul>
<li><strong>Trend</strong>: Long-term movement</li>
<li><strong>Seasonality</strong>: Regular, periodic fluctuations</li>
<li><strong>Residual/Irregular</strong>: Random noise or anomalies</li>
</ul>
</section>
<section id="additive-vs-multiplicative" class="slide level2">
<h2>Additive vs Multiplicative</h2>
<ul>
<li><p><strong>Additive model</strong>:<br>
<span class="math display">\[ Y_t = T_t + S_t + R_t \]</span></p></li>
<li><p><strong>Multiplicative model</strong>:<br>
<span class="math display">\[ Y_t = T_t \times S_t \times R_t \]</span></p></li>
</ul>
<blockquote>
<p>Use additive if seasonal variation is roughly constant.<br>
Use multiplicative if it grows/shrinks with the trend.</p>
</blockquote>
</section>
<section id="example" class="slide level2">
<h2>Example</h2>

<img data-src="images/add-vs-multi.jpg" style="width:100.0%" class="r-stretch"></section>
<section id="why-decompose" class="slide level2">
<h2>Why Decompose?</h2>
<ul>
<li><p>Trend: Are CO₂ levels increasing?</p></li>
<li><p>Seasonality: Are there predictable cycles each year?</p></li>
<li><p>Remainder: What’s left after we remove trend and season? (what is the randomness?)</p></li>
</ul>
</section>
<section id="decompostion-in-r" class="slide level2">
<h2>Decompostion in R</h2>
<ul>
<li>The <code>decompose()</code> function in R can be used to perform this operation.</li>
<li>The <code>decompose()</code> function by default assumes that the <span class="undeline">time series is additive</span></li>
</ul>
<div class="cell" data-fig.size="10">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a>decomp <span class="ot">=</span> <span class="fu">decompose</span>(co2, <span class="at">type =</span> <span class="st">"additive"</span>)</span>
<span id="cb15-2"><a></a><span class="fu">plot</span>(decomp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-16-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="deep-dive-trend-component" class="slide level2">
<h2>Deep Dive: Trend Component</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="fu">plot</span>(decomp<span class="sc">$</span>trend, <span class="at">main =</span> <span class="st">"Trend Component of CO₂"</span>, <span class="at">ylab =</span> <span class="st">"ppm"</span>, <span class="at">col =</span> <span class="st">"darkred"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-17-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><p>Steady upward slope from ~316 ppm in 1959 to ~365 ppm in the late 1990s</p></li>
<li><p>Captures the long-term forcing from human activity:</p>
<ul>
<li>Fossil fuel combustion</li>
<li>Deforestation</li>
</ul></li>
<li><p>This trend underpins climate change science — known as the Keeling Curve</p></li>
<li><p>Notice how the trend smooths short-term fluctuations</p></li>
</ul>
</div></div>
</section>
<section id="interpreting-the-trend" class="slide level2">
<h2>Interpreting the Trend</h2>
<ul>
<li>A linear model or loess smoother can also help quantify the trend:</li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a>co2_df <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(<span class="at">time =</span> <span class="fu">time</span>(co2), <span class="at">co2 =</span> <span class="fu">as.numeric</span>(co2))</span>
<span id="cb17-2"><a></a></span>
<span id="cb17-3"><a></a><span class="fu">lm</span>(<span class="fu">as.numeric</span>(co2) <span class="sc">~</span> <span class="fu">time</span>(co2)) <span class="sc">|&gt;</span> </span>
<span id="cb17-4"><a></a>  <span class="fu">summary</span>()</span>
<span id="cb17-5"><a></a><span class="co">#&gt; </span></span>
<span id="cb17-6"><a></a><span class="co">#&gt; Call:</span></span>
<span id="cb17-7"><a></a><span class="co">#&gt; lm(formula = as.numeric(co2) ~ time(co2))</span></span>
<span id="cb17-8"><a></a><span class="co">#&gt; </span></span>
<span id="cb17-9"><a></a><span class="co">#&gt; Residuals:</span></span>
<span id="cb17-10"><a></a><span class="co">#&gt;     Min      1Q  Median      3Q     Max </span></span>
<span id="cb17-11"><a></a><span class="co">#&gt; -6.0399 -1.9476 -0.0017  1.9113  6.5149 </span></span>
<span id="cb17-12"><a></a><span class="co">#&gt; </span></span>
<span id="cb17-13"><a></a><span class="co">#&gt; Coefficients:</span></span>
<span id="cb17-14"><a></a><span class="co">#&gt;               Estimate Std. Error t value Pr(&gt;|t|)    </span></span>
<span id="cb17-15"><a></a><span class="co">#&gt; (Intercept) -2.250e+03  2.127e+01  -105.8   &lt;2e-16 ***</span></span>
<span id="cb17-16"><a></a><span class="co">#&gt; time(co2)    1.308e+00  1.075e-02   121.6   &lt;2e-16 ***</span></span>
<span id="cb17-17"><a></a><span class="co">#&gt; ---</span></span>
<span id="cb17-18"><a></a><span class="co">#&gt; Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1</span></span>
<span id="cb17-19"><a></a><span class="co">#&gt; </span></span>
<span id="cb17-20"><a></a><span class="co">#&gt; Residual standard error: 2.618 on 466 degrees of freedom</span></span>
<span id="cb17-21"><a></a><span class="co">#&gt; Multiple R-squared:  0.9695, Adjusted R-squared:  0.9694 </span></span>
<span id="cb17-22"><a></a><span class="co">#&gt; F-statistic: 1.479e+04 on 1 and 466 DF,  p-value: &lt; 2.2e-16</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>co2_df <span class="sc">|&gt;</span></span>
<span id="cb18-2"><a></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> time, <span class="at">y =</span> co2)) <span class="sc">+</span></span>
<span id="cb18-3"><a></a>  <span class="fu">geom_line</span>(<span class="at">alpha =</span> <span class="fl">0.5</span>) <span class="sc">+</span></span>
<span id="cb18-4"><a></a>  <span class="fu">geom_smooth</span>(<span class="at">method =</span> <span class="st">"loess"</span>, <span class="at">span =</span> <span class="fl">0.2</span>, <span class="at">color =</span> <span class="st">"red"</span>, <span class="at">se =</span> <span class="cn">FALSE</span>) <span class="sc">+</span></span>
<span id="cb18-5"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"CO₂ Trend with Loess Smoothing"</span>, <span class="at">y =</span> <span class="st">"ppm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-19-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
<p>Do you see acceleration in the rise over time?</p>
</section>
<section id="de-trending" class="slide level2">
<h2>De-Trending</h2>
<ul>
<li>Detrending is the process of removing the trend component from a time series.</li>
<li>This can help for modeling the trend + residual only:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a>deseasonalized <span class="ot">&lt;-</span> co2 <span class="sc">-</span> decomp<span class="sc">$</span>trend</span>
<span id="cb19-2"><a></a><span class="fu">plot</span>(deseasonalized, <span class="at">main =</span> <span class="st">"De-trended Series"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-20-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="deep-dive-seasonal-component" class="slide level2">
<h2>Deep Dive: Seasonal Component</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a></a><span class="fu">plot</span>(decomp<span class="sc">$</span>seasonal, <span class="at">main =</span> <span class="st">"Seasonal Component of CO₂"</span>, </span>
<span id="cb20-2"><a></a>     <span class="at">ylab =</span> <span class="st">"ppm"</span>, <span class="at">col =</span> <span class="st">"darkgreen"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-21-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><p>Repeats every 12 months</p></li>
<li><p>Peaks around May, drops in September–October</p></li>
<li><p>Driven by biospheric fluxes:</p>
<ul>
<li>Photosynthesis during spring/summer → CO₂ drawdown</li>
<li>Decomposition and respiration in winter → CO₂ release</li>
</ul></li>
<li><p>Seasonal Cycle is Northern Hemisphere-Dominated (Mauna Loa is in the Northern Hemisphere)</p></li>
<li><p>Northern Hemisphere contains more landmass and vegetation</p></li>
<li><p>So its biosphere exerts a stronger influence on global CO₂ than the Southern Hemisphere</p></li>
<li><p>This explains the pronounced seasonal cycle in the signal</p></li>
</ul>
</div></div>
</section>
<section id="de-seasonalizing" class="slide level2">
<h2>De-seasonalizing</h2>
<p>This can help for modeling the seasonal + residual only:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a></a>deseasonalized <span class="ot">&lt;-</span> co2 <span class="sc">-</span> decomp<span class="sc">$</span>seasonal</span>
<span id="cb21-2"><a></a><span class="fu">plot</span>(deseasonalized, <span class="at">main =</span> <span class="st">"De-seasonalized Series"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-22-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="deep-dive-remainder-component" class="slide level2">
<h2>Deep Dive: Remainder Component</h2>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb22"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb22-1"><a></a><span class="fu">plot</span>(decomp<span class="sc">$</span>random, <span class="at">main =</span> <span class="st">"Remainder Component (Residuals)"</span>, </span>
<span id="cb22-2"><a></a>     <span class="at">ylab =</span> <span class="st">"ppm"</span>, <span class="at">col =</span> <span class="st">"gray40"</span>, <span class="at">lwd =</span> <span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-23-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<ul>
<li><p>Residuals are the “leftover” part of the time series after removing trend and seasonality</p></li>
<li><p>Contains irregular, short-term fluctuations</p></li>
<li><p>Can be used to identify anomalies or outliers</p></li>
<li><p>Important for understanding noise in the data</p></li>
<li><p>Possible sources:</p>
<ul>
<li>Volcanic activity (e.g.&nbsp;El Chichón, Mt. Pinatubo)</li>
<li>Measurement error</li>
<li>El Niño/La Niña events (which affect carbon flux)</li>
</ul></li>
<li><p>Typically small amplitude: ±0.2 ppm</p></li>
</ul>
</div></div>
</section>
<section id="asssessing-patterns-in-error" class="slide level2">
<h2>Asssessing Patterns in Error?</h2>
<p>You might compute the standard deviation of the residuals to assess noise:</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a></a><span class="fu">sd</span>(<span class="fu">na.omit</span>(decomp<span class="sc">$</span>random))</span>
<span id="cb23-2"><a></a><span class="co">#&gt; [1] 0.2651064</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>Or evaluate the residules like we did for Linear Modeling!</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a></a>ggpubr<span class="sc">::</span><span class="fu">ggdensity</span>(decomp<span class="sc">$</span>random, <span class="at">main =</span> <span class="st">"Residuals Histogram"</span>, <span class="at">xlab =</span> <span class="st">"Residuals"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-25-1.png" style="width:60.0%"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="smoothing-to-remove-noise" class="slide level2">
<h2>Smoothing to Remove Noise</h2>
<p>If your data is noisy - and without usefull pattern - you can use a moving average to smooth it out.</p>
<p><br></p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li>The <code>zoo</code> package provides a convenient function for this that we have already seen in the COVID lab.</li>
<li>The <code>rollmean()</code> function from the <code>zoo</code> package is useful for this.</li>
<li>The <code>k</code> parameter specifies the window size for the moving average.</li>
<li>The <code>align</code> parameter specifies how to align the moving average with the original data (e.g., “center”, “left”, “right”).</li>
<li>The <code>na.pad</code> parameter specifies whether to pad the result with <code>NA</code> values.</li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb25"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb25-1"><a></a>co2_smooth <span class="ot">&lt;-</span> zoo<span class="sc">::</span><span class="fu">rollmean</span>(co2, <span class="at">k =</span> <span class="dv">12</span>, <span class="at">align =</span> <span class="st">"center"</span>, <span class="at">na.pad =</span> <span class="cn">TRUE</span>)</span>
<span id="cb25-2"><a></a></span>
<span id="cb25-3"><a></a><span class="fu">plot</span>(co2, <span class="at">col =</span> <span class="st">"grey"</span>, <span class="at">main =</span> <span class="st">"12-Month Moving Average"</span>)</span>
<span id="cb25-4"><a></a><span class="fu">lines</span>(co2_smooth, <span class="at">col =</span> <span class="st">"blue"</span>, <span class="at">lwd =</span> <span class="dv">2</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-26-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="stl-decomposition-loess-based" class="slide level2">
<h2>STL Decomposition (Loess-based)</h2>
<ul>
<li><p>STL (Seasonal-Trend decomposition using Loess) adapts to changing trend or seasonality over time</p></li>
<li><p>Doesn’t assume constant seasonal effect like <code>decompose()</code> does</p></li>
<li><p>Particularly valuable when working with:</p>
<ul>
<li>Long datasets</li>
<li><u>Environmental time series affected by nonlinear changes</u></li>
</ul></li>
</ul>
</section>
<section id="stl-decomposition-loess-based-1" class="slide level2">
<h2>STL Decomposition (Loess-based)</h2>
<ul>
<li><p><code>stl()</code> uses local regression (loess) to estimate the trend and seasonal components.</p></li>
<li><p><code>s.window = "periodic"</code> specifies that the seasonal component is periodic.</p></li>
<li><p>Other options include</p>
<ul>
<li>“none” (no seasonal component)</li>
<li>or a numeric value for the seasonal window size.</li>
</ul></li>
</ul>
<div class="columns">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a></a><span class="fu">plot</span>(decomp)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-27-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb27"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb27-1"><a></a>?<span class="fu">stl</span>(co2, <span class="at">s.window =</span> <span class="st">"periodic"</span>) <span class="sc">|&gt;</span>  </span>
<span id="cb27-2"><a></a>  <span class="fu">plot</span>()</span>
<span id="cb27-3"><a></a><span class="co">#&gt; Help on topic 'plot' was found in the following packages:</span></span>
<span id="cb27-4"><a></a><span class="co">#&gt; </span></span>
<span id="cb27-5"><a></a><span class="co">#&gt;   Package               Library</span></span>
<span id="cb27-6"><a></a><span class="co">#&gt;   graphics              /Library/Frameworks/R.framework/Versions/4.4-arm64/Resources/library</span></span>
<span id="cb27-7"><a></a><span class="co">#&gt;   base                  /Library/Frameworks/R.framework/Resources/library</span></span>
<span id="cb27-8"><a></a><span class="co">#&gt; </span></span>
<span id="cb27-9"><a></a><span class="co">#&gt; </span></span>
<span id="cb27-10"><a></a><span class="co">#&gt; Using the first match ...</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section>
<section id="comparing-classical-vs-stl" class="slide level2">
<h2>Comparing Classical vs STL</h2>
<table class="caption-top">
<colgroup>
<col style="width: 9%">
<col style="width: 33%">
<col style="width: 29%">
<col style="width: 28%">
</colgroup>
<thead>
<tr class="header">
<th>Method</th>
<th>Assumes Constant Season?</th>
<th>Robust to Outliers?</th>
<th>Adaptive Smoothing?</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>decompose</td>
<td>✅ Yes</td>
<td>❌ No</td>
<td>❌ No</td>
</tr>
<tr class="even">
<td>stl</td>
<td>✅ or 🔄 (customizable)</td>
<td>✅ Yes</td>
<td>✅ Yes</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Recommendation: Use stl() for most real-world environmental time series.</p>
</blockquote>
</section>
<section id="bringing-it-all-together" class="slide level2">
<h2>Bringing It All Together</h2>
<p>For the CO2 dataset, we can summarize the components of the time series:</p>
<ul>
<li>Trend: A human fingerprint — atmospheric CO₂ continues to rise year over year</li>
<li>Seasonality: Driven by biospheric rhythms with not multiplicative gains</li>
<li>Remainder: Small, but potentially rich with short-term signals</li>
</ul>
<p>Understanding these components lets us:<br>
</p>
<p>✅ Track long-term progress<br>
</p>
<p>✅ Forecast future CO₂<br>
</p>
<p>✅ Communicate patterns clearly to policymakers<br>
</p>
</section>
<section id="time-series-in-the-tidyverse-tsibble-feasts" class="slide level2">
<h2>Time Series in the Tidyverse: <code>tsibble</code> / <code>feasts</code></h2>
<ul>
<li><p><code>tsibble</code> is a tidy data frame for time series data. It extends the tibble class to include time series attributes.</p></li>
<li><p>Compatible with <code>dplyr</code>, <code>ggplot2</code></p></li>
<li><p><code>feasts</code> provides functions for time series analysis and visualization.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a></a>co2_tbl <span class="ot">&lt;-</span> <span class="fu">as_tsibble</span>(co2)</span>
<span id="cb28-2"><a></a><span class="fu">head</span>(co2_tbl)</span>
<span id="cb28-3"><a></a><span class="co">#&gt; # A tsibble: 6 x 2 [1M]</span></span>
<span id="cb28-4"><a></a><span class="co">#&gt;      index value</span></span>
<span id="cb28-5"><a></a><span class="co">#&gt;      &lt;mth&gt; &lt;dbl&gt;</span></span>
<span id="cb28-6"><a></a><span class="co">#&gt; 1 1959 Jan  315.</span></span>
<span id="cb28-7"><a></a><span class="co">#&gt; 2 1959 Feb  316.</span></span>
<span id="cb28-8"><a></a><span class="co">#&gt; 3 1959 Mar  316.</span></span>
<span id="cb28-9"><a></a><span class="co">#&gt; 4 1959 Apr  318.</span></span>
<span id="cb28-10"><a></a><span class="co">#&gt; 5 1959 May  318.</span></span>
<span id="cb28-11"><a></a><span class="co">#&gt; 6 1959 Jun  318</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="decomposing-with-feasts" class="slide level2">
<h2>Decomposing with <code>feasts</code></h2>
<h3 id="feasts-provides"><code>feasts</code> provides:</h3>
<ul>
<li>a <code>STL()</code> function for seasonal decomposition.</li>
<li><code>components()</code> extracts the components of the decomposition.</li>
<li><code>gg_season()</code> and <code>gg_subseries()</code> visualize seasonal patterns.</li>
<li><code>gg_lag()</code> visualizes autocorrelation and lagged relationships.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb29"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb29-1"><a></a>co2_decomp <span class="ot">&lt;-</span> co2_tbl <span class="sc">|&gt;</span></span>
<span id="cb29-2"><a></a>  <span class="fu">model</span>(<span class="fu">STL</span>(value <span class="sc">~</span> <span class="fu">season</span>(<span class="at">window =</span> <span class="st">"periodic"</span>))) <span class="sc">|&gt;</span></span>
<span id="cb29-3"><a></a>  <span class="fu">components</span>()</span>
<span id="cb29-4"><a></a></span>
<span id="cb29-5"><a></a><span class="fu">glimpse</span>(co2_decomp)</span>
<span id="cb29-6"><a></a><span class="co">#&gt; Rows: 468</span></span>
<span id="cb29-7"><a></a><span class="co">#&gt; Columns: 7</span></span>
<span id="cb29-8"><a></a><span class="co">#&gt; Key: .model [1]</span></span>
<span id="cb29-9"><a></a><span class="co">#&gt; : value = trend + season_year + remainder</span></span>
<span id="cb29-10"><a></a><span class="co">#&gt; $ .model        &lt;chr&gt; "STL(value ~ season(window = \"periodic\"))", "STL(value…</span></span>
<span id="cb29-11"><a></a><span class="co">#&gt; $ index         &lt;mth&gt; 1959 Jan, 1959 Feb, 1959 Mar, 1959 Apr, 1959 May, 1959 J…</span></span>
<span id="cb29-12"><a></a><span class="co">#&gt; $ value         &lt;dbl&gt; 315.42, 316.31, 316.50, 317.56, 318.13, 318.00, 316.39, …</span></span>
<span id="cb29-13"><a></a><span class="co">#&gt; $ trend         &lt;dbl&gt; 315.1954, 315.3023, 315.4093, 315.5147, 315.6201, 315.71…</span></span>
<span id="cb29-14"><a></a><span class="co">#&gt; $ season_year   &lt;dbl&gt; -0.06100103, 0.59463870, 1.32899651, 2.46904706, 2.95704…</span></span>
<span id="cb29-15"><a></a><span class="co">#&gt; $ remainder     &lt;dbl&gt; 0.28564410, 0.41305456, -0.23825306, -0.42371128, -0.447…</span></span>
<span id="cb29-16"><a></a><span class="co">#&gt; $ season_adjust &lt;dbl&gt; 315.4810, 315.7154, 315.1710, 315.0910, 315.1730, 315.68…</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="component-access" class="slide level2">
<h2>Component Access</h2>
<div class="columns">
<div class="column" style="width:50%;">
<h4 id="autoplot">Autoplot</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a></a><span class="fu">autoplot</span>(co2_decomp) <span class="sc">+</span></span>
<span id="cb30-2"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"STL Decomposition of CO₂"</span>, <span class="at">y =</span> <span class="st">"ppm"</span>) <span class="sc">+</span></span>
<span id="cb30-3"><a></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-31-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
</div>
</div><div class="column" style="width:50%;">
<h4 id="component-access-1">Component Access</h4>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a></a>ggpubr<span class="sc">::</span><span class="fu">ggdensity</span>(co2_decomp<span class="sc">$</span>remainder, <span class="at">main =</span> <span class="st">"Residual Component"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-32-1.png" style="width:100.0%"></p>
</figure>
</div>
</div>
<div class="sourceCode cell-code" id="cb32"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb32-1"><a></a><span class="fu">shapiro.test</span>(co2_decomp<span class="sc">$</span>remainder)</span>
<span id="cb32-2"><a></a><span class="co">#&gt; </span></span>
<span id="cb32-3"><a></a><span class="co">#&gt;  Shapiro-Wilk normality test</span></span>
<span id="cb32-4"><a></a><span class="co">#&gt; </span></span>
<span id="cb32-5"><a></a><span class="co">#&gt; data:  co2_decomp$remainder</span></span>
<span id="cb32-6"><a></a><span class="co">#&gt; W = 0.99485, p-value = 0.1202</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div></div>
</section>
<section id="advanced-visualizationmodeling-with-feasts" class="slide level2">
<h2>Advanced Visualization/Modeling with <code>feasts</code></h2>
</section>
<section id="gg_lag" class="slide level2">
<h2>gg_lag()</h2>
<ul>
<li><p>A lag plot is a scatterplot of a time series against itself, but with a time shift (or “lag”) applied to one of the series.</p></li>
<li><p>It helps us visualize the relationship between current and past values of a time series.</p></li>
</ul>
<p>📦 Here’s the simple idea:<br>
</p>
<ul>
<li><p>You take your CO₂ measurements over time.<br>
</p></li>
<li><p>Then you make a graph where you plot today’s CO₂ (on the Y-axis)…<br>
</p></li>
<li><p>…against CO₂ from a few months ago (on the X-axis).<br>
</p></li>
<li><p>This shows you if the past helps predict the present!<br>
</p></li>
</ul>
<p>📊 If it makes a curvy shape or a line…<br>
</p>
<ul>
<li><p>…that means there’s a pattern! Your data remembers what happened before — like a smart friend who learns from their past.<br>
</p></li>
<li><p>But if the dots look like a big messy spaghetti mess that means the data is random, with no memory of what happened before.<br>
</p></li>
</ul>
</section>
<section id="gg_lag-1" class="slide level2">
<h2>gg_lag()</h2>
<p>🧠 Why this is useful:<br>
</p>
<ul>
<li><p>It helps us see if there are patterns in the data.<br>
</p></li>
<li><p>It helps us understand how past values affect current values.<br>
</p></li>
<li><p>It helps us decide if we can use this data to make predictions in the future.<br>
</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a></a>co2_tbl <span class="sc">|&gt;</span> </span>
<span id="cb33-2"><a></a>  <span class="fu">gg_lag</span>() <span class="sc">+</span></span>
<span id="cb33-3"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Lag Plot of CO₂"</span>, <span class="at">x =</span> <span class="st">"Lagged CO₂"</span>, <span class="at">y =</span> <span class="st">"Current CO₂"</span>) <span class="sc">+</span></span>
<span id="cb33-4"><a></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-33-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="gg_subseries" class="slide level2">
<h2>gg_subseries</h2>
<ul>
<li><p>Imagine the co2 dataset as a big collection of monthly CO₂ data from Mauna Loa. Each month is a group, and each year is a new object</p></li>
<li><p>Now, we want to see how each month behaves across the years, so we can spot if January always has higher or lower CO₂ levels, for example.</p></li>
</ul>
<p>📊 What this does:</p>
<ul>
<li><p>Each month: A different color shows up for each month (like January in blue, February in red, etc.)</p></li>
<li><p>Lines: You see the CO₂ values for each month over different years. For example, you might notice that CO₂ levels tend to be higher in the spring and lower in the fall.</p></li>
</ul>
<p>🧠 Why this is useful:</p>
<ul>
<li><p>We can spot seasonal trends: Does CO₂ rise in the winter? Or fall in the summer?</p></li>
<li><p>We can also compare months across the years: Is January more or less CO₂-heavy compared to other months?</p></li>
</ul>
</section>
<section id="gg_subseries-1" class="slide level2">
<h2>gg_subseries()</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a></a><span class="fu">gg_subseries</span>(co2_tbl) <span class="sc">+</span></span>
<span id="cb34-2"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Monthly CO₂ Patterns"</span>, <span class="at">y =</span> <span class="st">"CO₂ (ppm)"</span>, <span class="at">x =</span> <span class="st">"Year"</span>) <span class="sc">+</span> </span>
<span id="cb34-3"><a></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-34-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="gg_season" class="slide level2">
<h2>gg_season</h2>
<ul>
<li><p>Think of <code>gg_season()</code> like a way to look at a yearly picture of CO₂ and see if the Earth follows a seasonal rhythm.</p></li>
<li><p>It makes the changes in CO₂ easy to spot when you look at months side-by-side.</p></li>
</ul>
<p>📊 What this does:</p>
<ul>
<li>It shows you how CO₂ changes during each month of the year, but it puts all the years together, so you can see if the same thing happens every year in January, February, and so on.</li>
</ul>
<p>🧠 Why this is useful:</p>
<ul>
<li>You’ll see a smooth curve for each month. Each curve shows how CO₂ goes up and down each year in the same pattern.</li>
</ul>
</section>
<section id="gg_season-1" class="slide level2">
<h2>gg_season</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb35"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb35-1"><a></a><span class="fu">gg_season</span>(co2_tbl) <span class="sc">+</span></span>
<span id="cb35-2"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Seasonal Patterns of CO₂"</span>, <span class="at">y =</span> <span class="st">"CO₂ (ppm)"</span>, <span class="at">x =</span> <span class="st">"Month"</span>) <span class="sc">+</span></span>
<span id="cb35-3"><a></a>  <span class="fu">theme_minimal</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="21-timeseries_files/figure-revealjs/unnamed-chunk-35-1.png" style="width:100.0%" class="r-stretch"></section>
<section id="bonus-interactive-plotting" class="slide level2">
<h2>Bonus: Interactive Plotting</h2>
<ul>
<li><p>In last weeks demo, we used plotly to generate an interactive plot of the hyperparameter tuning process.</p></li>
<li><p>You can use the <code>plotly</code> package to add interactivity to your ggplots directly with <code>ggplotly()</code>!</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a></a><span class="fu">library</span>(plotly)</span>
<span id="cb36-2"><a></a></span>
<span id="cb36-3"><a></a>co2_plot <span class="ot">&lt;-</span> co2_tbl <span class="sc">|&gt;</span></span>
<span id="cb36-4"><a></a>  <span class="fu">autoplot</span>() <span class="sc">+</span></span>
<span id="cb36-5"><a></a>  <span class="fu">geom_line</span>(<span class="at">color =</span> <span class="st">"steelblue"</span>) <span class="sc">+</span></span>
<span id="cb36-6"><a></a>  <span class="fu">labs</span>(<span class="at">title =</span> <span class="st">"Interactive CO₂ Time Series"</span>, <span class="at">x =</span> <span class="st">"Date"</span>, <span class="at">y =</span> <span class="st">"ppm"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="bonus-interactive-plotting-1" class="slide level2">
<h2>Bonus: Interactive Plotting</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a></a><span class="fu">ggplotly</span>(co2_plot)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<div class="plotly html-widget html-fill-item" id="htmlwidget-73460440c9aeeea2a2fc" style="width:100%;height:480px;"></div>
<script type="application/json" data-for="htmlwidget-73460440c9aeeea2a2fc">{"x":{"data":[{"x":[-4018,-3987,-3959,-3928,-3898,-3867,-3837,-3806,-3775,-3745,-3714,-3684,-3653,-3622,-3593,-3562,-3532,-3501,-3471,-3440,-3409,-3379,-3348,-3318,-3287,-3256,-3228,-3197,-3167,-3136,-3106,-3075,-3044,-3014,-2983,-2953,-2922,-2891,-2863,-2832,-2802,-2771,-2741,-2710,-2679,-2649,-2618,-2588,-2557,-2526,-2498,-2467,-2437,-2406,-2376,-2345,-2314,-2284,-2253,-2223,-2192,-2161,-2132,-2101,-2071,-2040,-2010,-1979,-1948,-1918,-1887,-1857,-1826,-1795,-1767,-1736,-1706,-1675,-1645,-1614,-1583,-1553,-1522,-1492,-1461,-1430,-1402,-1371,-1341,-1310,-1280,-1249,-1218,-1188,-1157,-1127,-1096,-1065,-1037,-1006,-976,-945,-915,-884,-853,-823,-792,-762,-731,-700,-671,-640,-610,-579,-549,-518,-487,-457,-426,-396,-365,-334,-306,-275,-245,-214,-184,-153,-122,-92,-61,-31,0,31,59,90,120,151,181,212,243,273,304,334,365,396,424,455,485,516,546,577,608,638,669,699,730,761,790,821,851,882,912,943,974,1004,1035,1065,1096,1127,1155,1186,1216,1247,1277,1308,1339,1369,1400,1430,1461,1492,1520,1551,1581,1612,1642,1673,1704,1734,1765,1795,1826,1857,1885,1916,1946,1977,2007,2038,2069,2099,2130,2160,2191,2222,2251,2282,2312,2343,2373,2404,2435,2465,2496,2526,2557,2588,2616,2647,2677,2708,2738,2769,2800,2830,2861,2891,2922,2953,2981,3012,3042,3073,3103,3134,3165,3195,3226,3256,3287,3318,3346,3377,3407,3438,3468,3499,3530,3560,3591,3621,3652,3683,3712,3743,3773,3804,3834,3865,3896,3926,3957,3987,4018,4049,4077,4108,4138,4169,4199,4230,4261,4291,4322,4352,4383,4414,4442,4473,4503,4534,4564,4595,4626,4656,4687,4717,4748,4779,4807,4838,4868,4899,4929,4960,4991,5021,5052,5082,5113,5144,5173,5204,5234,5265,5295,5326,5357,5387,5418,5448,5479,5510,5538,5569,5599,5630,5660,5691,5722,5752,5783,5813,5844,5875,5903,5934,5964,5995,6025,6056,6087,6117,6148,6178,6209,6240,6268,6299,6329,6360,6390,6421,6452,6482,6513,6543,6574,6605,6634,6665,6695,6726,6756,6787,6818,6848,6879,6909,6940,6971,6999,7030,7060,7091,7121,7152,7183,7213,7244,7274,7305,7336,7364,7395,7425,7456,7486,7517,7548,7578,7609,7639,7670,7701,7729,7760,7790,7821,7851,7882,7913,7943,7974,8004,8035,8066,8095,8126,8156,8187,8217,8248,8279,8309,8340,8370,8401,8432,8460,8491,8521,8552,8582,8613,8644,8674,8705,8735,8766,8797,8825,8856,8886,8917,8947,8978,9009,9039,9070,9100,9131,9162,9190,9221,9251,9282,9312,9343,9374,9404,9435,9465,9496,9527,9556,9587,9617,9648,9678,9709,9740,9770,9801,9831,9862,9893,9921,9952,9982,10013,10043,10074,10105,10135,10166,10196],"y":[315.42000000000002,316.31,316.5,317.56,318.13,318,316.38999999999999,314.64999999999998,313.68000000000001,313.18000000000001,314.66000000000003,315.43000000000001,316.26999999999998,316.81,317.42000000000002,318.87,319.87,319.43000000000001,318.00999999999999,315.74000000000001,314,313.68000000000001,314.83999999999997,316.02999999999997,316.73000000000002,317.54000000000002,318.38,319.31,320.42000000000002,319.61000000000001,318.42000000000002,316.63,314.82999999999998,315.16000000000003,315.94,316.85000000000002,317.77999999999997,318.39999999999998,319.52999999999997,320.42000000000002,320.85000000000002,320.44999999999999,319.44999999999999,317.25,316.11000000000001,315.26999999999998,316.52999999999997,317.52999999999997,318.57999999999998,318.92000000000002,319.69999999999999,321.22000000000003,322.07999999999998,321.31,319.57999999999998,317.61000000000001,316.05000000000001,315.82999999999998,316.91000000000003,318.19999999999999,319.41000000000003,320.06999999999999,320.74000000000001,321.39999999999998,322.06,321.73000000000002,320.26999999999998,318.54000000000002,316.54000000000002,316.70999999999998,317.52999999999997,318.55000000000001,319.26999999999998,320.27999999999997,320.73000000000002,321.97000000000003,322,321.70999999999998,321.05000000000001,318.70999999999998,317.66000000000003,317.13999999999999,318.69999999999999,319.25,320.45999999999998,321.43000000000001,322.23000000000002,323.54000000000002,323.91000000000003,323.58999999999997,322.24000000000001,320.19999999999999,318.48000000000002,317.94,319.63,320.87,322.17000000000002,322.33999999999997,322.88,324.25,324.82999999999998,323.93000000000001,322.38,320.75999999999999,319.10000000000002,319.24000000000001,320.56,321.80000000000001,322.39999999999998,322.99000000000001,323.73000000000002,324.86000000000001,325.39999999999998,325.19999999999999,323.98000000000002,321.94999999999999,320.18000000000001,320.08999999999997,321.16000000000003,322.74000000000001,323.82999999999998,324.25999999999999,325.47000000000003,326.5,327.20999999999998,326.54000000000002,325.72000000000003,323.5,322.22000000000003,321.62,322.69,323.94999999999999,324.88999999999999,325.81999999999999,326.76999999999998,327.97000000000003,327.91000000000003,327.5,326.18000000000001,324.52999999999997,322.93000000000001,322.89999999999998,323.85000000000002,324.95999999999998,326.00999999999999,326.50999999999999,327.00999999999999,327.62,328.75999999999999,328.39999999999998,327.19999999999999,325.26999999999998,323.19999999999999,323.39999999999998,324.63,325.85000000000002,326.60000000000002,327.47000000000003,327.57999999999998,329.56,329.89999999999998,328.92000000000002,327.88,326.16000000000003,324.68000000000001,325.04000000000002,326.33999999999997,327.38999999999999,328.37,329.39999999999998,330.13999999999999,331.32999999999998,332.31,331.89999999999998,330.69999999999999,329.14999999999998,327.35000000000002,327.01999999999998,327.99000000000001,328.48000000000002,329.18000000000001,330.55000000000001,331.31999999999999,332.48000000000002,332.92000000000002,332.07999999999998,331.00999999999999,329.23000000000002,327.26999999999998,327.20999999999998,328.29000000000002,329.41000000000003,330.23000000000002,331.25,331.87,333.13999999999999,333.80000000000001,333.43000000000001,331.73000000000002,329.89999999999998,328.39999999999998,328.17000000000002,329.31999999999999,330.58999999999997,331.57999999999998,332.38999999999999,333.32999999999998,334.41000000000003,334.70999999999998,334.17000000000002,332.88999999999999,330.76999999999998,329.13999999999999,328.77999999999997,330.13999999999999,331.51999999999998,332.75,333.24000000000001,334.52999999999997,335.89999999999998,336.56999999999999,336.10000000000002,334.75999999999999,332.58999999999997,331.42000000000002,330.98000000000002,332.24000000000001,333.68000000000001,334.80000000000001,335.22000000000003,336.47000000000003,337.58999999999997,337.83999999999997,337.72000000000003,336.37,334.50999999999999,332.60000000000002,332.38,333.75,334.77999999999997,336.05000000000001,336.58999999999997,337.79000000000002,338.70999999999998,339.30000000000001,339.12,337.56,335.92000000000002,333.75,333.69999999999999,335.12,336.56,337.83999999999997,338.19,339.91000000000003,340.60000000000002,341.29000000000002,341,339.38999999999999,337.43000000000001,335.72000000000003,335.83999999999997,336.93000000000001,338.04000000000002,339.06,340.30000000000001,341.20999999999998,342.32999999999998,342.74000000000001,342.07999999999998,340.31999999999999,338.25999999999999,336.51999999999998,336.68000000000001,338.19,339.44,340.56999999999999,341.44,342.52999999999997,343.38999999999999,343.95999999999998,343.18000000000001,341.88,339.64999999999998,337.81,337.69,339.08999999999997,340.31999999999999,341.19999999999999,342.35000000000002,342.93000000000001,344.76999999999998,345.57999999999998,345.13999999999999,343.81,342.20999999999998,339.69,339.81999999999999,340.98000000000002,342.81999999999999,343.51999999999998,344.32999999999998,345.11000000000001,346.88,347.25,346.62,345.22000000000003,343.11000000000001,340.89999999999998,341.18000000000001,342.80000000000001,344.04000000000002,344.79000000000002,345.81999999999999,347.25,348.17000000000002,348.74000000000001,348.06999999999999,346.38,344.50999999999999,342.92000000000002,342.62,344.06,345.38,346.11000000000001,346.77999999999997,347.68000000000001,349.37,350.02999999999997,349.37,347.75999999999999,345.73000000000002,344.68000000000001,343.99000000000001,345.48000000000002,346.72000000000003,347.83999999999997,348.29000000000002,349.23000000000002,350.80000000000001,351.66000000000003,351.06999999999999,349.32999999999998,347.92000000000002,346.26999999999998,346.18000000000001,347.63999999999999,348.77999999999997,350.25,351.54000000000002,352.05000000000001,353.41000000000003,354.04000000000002,353.62,352.22000000000003,350.26999999999998,348.55000000000001,348.72000000000003,349.91000000000003,351.18000000000001,352.60000000000002,352.92000000000002,353.52999999999997,355.25999999999999,355.51999999999998,354.97000000000003,353.75,351.51999999999998,349.63999999999999,349.82999999999998,351.13999999999999,352.37,353.5,354.55000000000001,355.23000000000002,356.04000000000002,357,356.06999999999999,354.67000000000002,352.75999999999999,350.81999999999999,351.04000000000002,352.69,354.06999999999999,354.58999999999997,355.63,357.02999999999997,358.48000000000002,359.22000000000003,358.12,356.06,353.92000000000002,352.05000000000001,352.11000000000001,353.63999999999999,354.88999999999999,355.88,356.63,357.72000000000003,359.06999999999999,359.57999999999998,359.17000000000002,356.94,354.92000000000002,352.94,353.23000000000002,354.08999999999997,355.32999999999998,356.63,357.10000000000002,358.31999999999999,359.41000000000003,360.23000000000002,359.55000000000001,357.52999999999997,355.48000000000002,353.67000000000002,353.94999999999999,355.30000000000001,356.77999999999997,358.33999999999997,358.88999999999999,359.94999999999999,361.25,361.67000000000002,360.94,359.55000000000001,357.49000000000001,355.83999999999997,356,357.58999999999997,359.05000000000001,359.98000000000002,361.02999999999997,361.66000000000003,363.48000000000002,363.81999999999999,363.30000000000001,361.94,359.5,358.11000000000001,357.80000000000001,359.61000000000001,360.74000000000001,362.08999999999997,363.29000000000002,364.06,364.75999999999999,365.44999999999999,365.00999999999999,363.69999999999999,361.54000000000002,359.50999999999999,359.64999999999998,360.80000000000001,362.38,363.23000000000002,364.06,364.61000000000001,366.39999999999998,366.83999999999997,365.68000000000001,364.51999999999998,362.56999999999999,360.24000000000001,360.82999999999998,362.49000000000001,364.33999999999997],"text":["index: 1959 Jan<br />value: 315.42","index: 1959 Feb<br />value: 316.31","index: 1959 Mar<br />value: 316.50","index: 1959 Apr<br />value: 317.56","index: 1959 May<br />value: 318.13","index: 1959 Jun<br />value: 318.00","index: 1959 Jul<br />value: 316.39","index: 1959 Aug<br />value: 314.65","index: 1959 Sep<br />value: 313.68","index: 1959 Oct<br />value: 313.18","index: 1959 Nov<br />value: 314.66","index: 1959 Dec<br />value: 315.43","index: 1960 Jan<br />value: 316.27","index: 1960 Feb<br />value: 316.81","index: 1960 Mar<br />value: 317.42","index: 1960 Apr<br />value: 318.87","index: 1960 May<br />value: 319.87","index: 1960 Jun<br />value: 319.43","index: 1960 Jul<br />value: 318.01","index: 1960 Aug<br />value: 315.74","index: 1960 Sep<br />value: 314.00","index: 1960 Oct<br />value: 313.68","index: 1960 Nov<br />value: 314.84","index: 1960 Dec<br />value: 316.03","index: 1961 Jan<br />value: 316.73","index: 1961 Feb<br />value: 317.54","index: 1961 Mar<br />value: 318.38","index: 1961 Apr<br />value: 319.31","index: 1961 May<br />value: 320.42","index: 1961 Jun<br />value: 319.61","index: 1961 Jul<br />value: 318.42","index: 1961 Aug<br />value: 316.63","index: 1961 Sep<br />value: 314.83","index: 1961 Oct<br />value: 315.16","index: 1961 Nov<br />value: 315.94","index: 1961 Dec<br />value: 316.85","index: 1962 Jan<br />value: 317.78","index: 1962 Feb<br />value: 318.40","index: 1962 Mar<br />value: 319.53","index: 1962 Apr<br />value: 320.42","index: 1962 May<br />value: 320.85","index: 1962 Jun<br />value: 320.45","index: 1962 Jul<br />value: 319.45","index: 1962 Aug<br />value: 317.25","index: 1962 Sep<br />value: 316.11","index: 1962 Oct<br />value: 315.27","index: 1962 Nov<br />value: 316.53","index: 1962 Dec<br />value: 317.53","index: 1963 Jan<br />value: 318.58","index: 1963 Feb<br />value: 318.92","index: 1963 Mar<br />value: 319.70","index: 1963 Apr<br />value: 321.22","index: 1963 May<br />value: 322.08","index: 1963 Jun<br />value: 321.31","index: 1963 Jul<br />value: 319.58","index: 1963 Aug<br />value: 317.61","index: 1963 Sep<br />value: 316.05","index: 1963 Oct<br />value: 315.83","index: 1963 Nov<br />value: 316.91","index: 1963 Dec<br />value: 318.20","index: 1964 Jan<br />value: 319.41","index: 1964 Feb<br />value: 320.07","index: 1964 Mar<br />value: 320.74","index: 1964 Apr<br />value: 321.40","index: 1964 May<br />value: 322.06","index: 1964 Jun<br />value: 321.73","index: 1964 Jul<br />value: 320.27","index: 1964 Aug<br />value: 318.54","index: 1964 Sep<br />value: 316.54","index: 1964 Oct<br />value: 316.71","index: 1964 Nov<br />value: 317.53","index: 1964 Dec<br />value: 318.55","index: 1965 Jan<br />value: 319.27","index: 1965 Feb<br />value: 320.28","index: 1965 Mar<br />value: 320.73","index: 1965 Apr<br />value: 321.97","index: 1965 May<br />value: 322.00","index: 1965 Jun<br />value: 321.71","index: 1965 Jul<br />value: 321.05","index: 1965 Aug<br />value: 318.71","index: 1965 Sep<br />value: 317.66","index: 1965 Oct<br />value: 317.14","index: 1965 Nov<br />value: 318.70","index: 1965 Dec<br />value: 319.25","index: 1966 Jan<br />value: 320.46","index: 1966 Feb<br />value: 321.43","index: 1966 Mar<br />value: 322.23","index: 1966 Apr<br />value: 323.54","index: 1966 May<br />value: 323.91","index: 1966 Jun<br />value: 323.59","index: 1966 Jul<br />value: 322.24","index: 1966 Aug<br />value: 320.20","index: 1966 Sep<br />value: 318.48","index: 1966 Oct<br />value: 317.94","index: 1966 Nov<br />value: 319.63","index: 1966 Dec<br />value: 320.87","index: 1967 Jan<br />value: 322.17","index: 1967 Feb<br />value: 322.34","index: 1967 Mar<br />value: 322.88","index: 1967 Apr<br />value: 324.25","index: 1967 May<br />value: 324.83","index: 1967 Jun<br />value: 323.93","index: 1967 Jul<br />value: 322.38","index: 1967 Aug<br />value: 320.76","index: 1967 Sep<br />value: 319.10","index: 1967 Oct<br />value: 319.24","index: 1967 Nov<br />value: 320.56","index: 1967 Dec<br />value: 321.80","index: 1968 Jan<br />value: 322.40","index: 1968 Feb<br />value: 322.99","index: 1968 Mar<br />value: 323.73","index: 1968 Apr<br />value: 324.86","index: 1968 May<br />value: 325.40","index: 1968 Jun<br />value: 325.20","index: 1968 Jul<br />value: 323.98","index: 1968 Aug<br />value: 321.95","index: 1968 Sep<br />value: 320.18","index: 1968 Oct<br />value: 320.09","index: 1968 Nov<br />value: 321.16","index: 1968 Dec<br />value: 322.74","index: 1969 Jan<br />value: 323.83","index: 1969 Feb<br />value: 324.26","index: 1969 Mar<br />value: 325.47","index: 1969 Apr<br />value: 326.50","index: 1969 May<br />value: 327.21","index: 1969 Jun<br />value: 326.54","index: 1969 Jul<br />value: 325.72","index: 1969 Aug<br />value: 323.50","index: 1969 Sep<br />value: 322.22","index: 1969 Oct<br />value: 321.62","index: 1969 Nov<br />value: 322.69","index: 1969 Dec<br />value: 323.95","index: 1970 Jan<br />value: 324.89","index: 1970 Feb<br />value: 325.82","index: 1970 Mar<br />value: 326.77","index: 1970 Apr<br />value: 327.97","index: 1970 May<br />value: 327.91","index: 1970 Jun<br />value: 327.50","index: 1970 Jul<br />value: 326.18","index: 1970 Aug<br />value: 324.53","index: 1970 Sep<br />value: 322.93","index: 1970 Oct<br />value: 322.90","index: 1970 Nov<br />value: 323.85","index: 1970 Dec<br />value: 324.96","index: 1971 Jan<br />value: 326.01","index: 1971 Feb<br />value: 326.51","index: 1971 Mar<br />value: 327.01","index: 1971 Apr<br />value: 327.62","index: 1971 May<br />value: 328.76","index: 1971 Jun<br />value: 328.40","index: 1971 Jul<br />value: 327.20","index: 1971 Aug<br />value: 325.27","index: 1971 Sep<br />value: 323.20","index: 1971 Oct<br />value: 323.40","index: 1971 Nov<br />value: 324.63","index: 1971 Dec<br />value: 325.85","index: 1972 Jan<br />value: 326.60","index: 1972 Feb<br />value: 327.47","index: 1972 Mar<br />value: 327.58","index: 1972 Apr<br />value: 329.56","index: 1972 May<br />value: 329.90","index: 1972 Jun<br />value: 328.92","index: 1972 Jul<br />value: 327.88","index: 1972 Aug<br />value: 326.16","index: 1972 Sep<br />value: 324.68","index: 1972 Oct<br />value: 325.04","index: 1972 Nov<br />value: 326.34","index: 1972 Dec<br />value: 327.39","index: 1973 Jan<br />value: 328.37","index: 1973 Feb<br />value: 329.40","index: 1973 Mar<br />value: 330.14","index: 1973 Apr<br />value: 331.33","index: 1973 May<br />value: 332.31","index: 1973 Jun<br />value: 331.90","index: 1973 Jul<br />value: 330.70","index: 1973 Aug<br />value: 329.15","index: 1973 Sep<br />value: 327.35","index: 1973 Oct<br />value: 327.02","index: 1973 Nov<br />value: 327.99","index: 1973 Dec<br />value: 328.48","index: 1974 Jan<br />value: 329.18","index: 1974 Feb<br />value: 330.55","index: 1974 Mar<br />value: 331.32","index: 1974 Apr<br />value: 332.48","index: 1974 May<br />value: 332.92","index: 1974 Jun<br />value: 332.08","index: 1974 Jul<br />value: 331.01","index: 1974 Aug<br />value: 329.23","index: 1974 Sep<br />value: 327.27","index: 1974 Oct<br />value: 327.21","index: 1974 Nov<br />value: 328.29","index: 1974 Dec<br />value: 329.41","index: 1975 Jan<br />value: 330.23","index: 1975 Feb<br />value: 331.25","index: 1975 Mar<br />value: 331.87","index: 1975 Apr<br />value: 333.14","index: 1975 May<br />value: 333.80","index: 1975 Jun<br />value: 333.43","index: 1975 Jul<br />value: 331.73","index: 1975 Aug<br />value: 329.90","index: 1975 Sep<br />value: 328.40","index: 1975 Oct<br />value: 328.17","index: 1975 Nov<br />value: 329.32","index: 1975 Dec<br />value: 330.59","index: 1976 Jan<br />value: 331.58","index: 1976 Feb<br />value: 332.39","index: 1976 Mar<br />value: 333.33","index: 1976 Apr<br />value: 334.41","index: 1976 May<br />value: 334.71","index: 1976 Jun<br />value: 334.17","index: 1976 Jul<br />value: 332.89","index: 1976 Aug<br />value: 330.77","index: 1976 Sep<br />value: 329.14","index: 1976 Oct<br />value: 328.78","index: 1976 Nov<br />value: 330.14","index: 1976 Dec<br />value: 331.52","index: 1977 Jan<br />value: 332.75","index: 1977 Feb<br />value: 333.24","index: 1977 Mar<br />value: 334.53","index: 1977 Apr<br />value: 335.90","index: 1977 May<br />value: 336.57","index: 1977 Jun<br />value: 336.10","index: 1977 Jul<br />value: 334.76","index: 1977 Aug<br />value: 332.59","index: 1977 Sep<br />value: 331.42","index: 1977 Oct<br />value: 330.98","index: 1977 Nov<br />value: 332.24","index: 1977 Dec<br />value: 333.68","index: 1978 Jan<br />value: 334.80","index: 1978 Feb<br />value: 335.22","index: 1978 Mar<br />value: 336.47","index: 1978 Apr<br />value: 337.59","index: 1978 May<br />value: 337.84","index: 1978 Jun<br />value: 337.72","index: 1978 Jul<br />value: 336.37","index: 1978 Aug<br />value: 334.51","index: 1978 Sep<br />value: 332.60","index: 1978 Oct<br />value: 332.38","index: 1978 Nov<br />value: 333.75","index: 1978 Dec<br />value: 334.78","index: 1979 Jan<br />value: 336.05","index: 1979 Feb<br />value: 336.59","index: 1979 Mar<br />value: 337.79","index: 1979 Apr<br />value: 338.71","index: 1979 May<br />value: 339.30","index: 1979 Jun<br />value: 339.12","index: 1979 Jul<br />value: 337.56","index: 1979 Aug<br />value: 335.92","index: 1979 Sep<br />value: 333.75","index: 1979 Oct<br />value: 333.70","index: 1979 Nov<br />value: 335.12","index: 1979 Dec<br />value: 336.56","index: 1980 Jan<br />value: 337.84","index: 1980 Feb<br />value: 338.19","index: 1980 Mar<br />value: 339.91","index: 1980 Apr<br />value: 340.60","index: 1980 May<br />value: 341.29","index: 1980 Jun<br />value: 341.00","index: 1980 Jul<br />value: 339.39","index: 1980 Aug<br />value: 337.43","index: 1980 Sep<br />value: 335.72","index: 1980 Oct<br />value: 335.84","index: 1980 Nov<br />value: 336.93","index: 1980 Dec<br />value: 338.04","index: 1981 Jan<br />value: 339.06","index: 1981 Feb<br />value: 340.30","index: 1981 Mar<br />value: 341.21","index: 1981 Apr<br />value: 342.33","index: 1981 May<br />value: 342.74","index: 1981 Jun<br />value: 342.08","index: 1981 Jul<br />value: 340.32","index: 1981 Aug<br />value: 338.26","index: 1981 Sep<br />value: 336.52","index: 1981 Oct<br />value: 336.68","index: 1981 Nov<br />value: 338.19","index: 1981 Dec<br />value: 339.44","index: 1982 Jan<br />value: 340.57","index: 1982 Feb<br />value: 341.44","index: 1982 Mar<br />value: 342.53","index: 1982 Apr<br />value: 343.39","index: 1982 May<br />value: 343.96","index: 1982 Jun<br />value: 343.18","index: 1982 Jul<br />value: 341.88","index: 1982 Aug<br />value: 339.65","index: 1982 Sep<br />value: 337.81","index: 1982 Oct<br />value: 337.69","index: 1982 Nov<br />value: 339.09","index: 1982 Dec<br />value: 340.32","index: 1983 Jan<br />value: 341.20","index: 1983 Feb<br />value: 342.35","index: 1983 Mar<br />value: 342.93","index: 1983 Apr<br />value: 344.77","index: 1983 May<br />value: 345.58","index: 1983 Jun<br />value: 345.14","index: 1983 Jul<br />value: 343.81","index: 1983 Aug<br />value: 342.21","index: 1983 Sep<br />value: 339.69","index: 1983 Oct<br />value: 339.82","index: 1983 Nov<br />value: 340.98","index: 1983 Dec<br />value: 342.82","index: 1984 Jan<br />value: 343.52","index: 1984 Feb<br />value: 344.33","index: 1984 Mar<br />value: 345.11","index: 1984 Apr<br />value: 346.88","index: 1984 May<br />value: 347.25","index: 1984 Jun<br />value: 346.62","index: 1984 Jul<br />value: 345.22","index: 1984 Aug<br />value: 343.11","index: 1984 Sep<br />value: 340.90","index: 1984 Oct<br />value: 341.18","index: 1984 Nov<br />value: 342.80","index: 1984 Dec<br />value: 344.04","index: 1985 Jan<br />value: 344.79","index: 1985 Feb<br />value: 345.82","index: 1985 Mar<br />value: 347.25","index: 1985 Apr<br />value: 348.17","index: 1985 May<br />value: 348.74","index: 1985 Jun<br />value: 348.07","index: 1985 Jul<br />value: 346.38","index: 1985 Aug<br />value: 344.51","index: 1985 Sep<br />value: 342.92","index: 1985 Oct<br />value: 342.62","index: 1985 Nov<br />value: 344.06","index: 1985 Dec<br />value: 345.38","index: 1986 Jan<br />value: 346.11","index: 1986 Feb<br />value: 346.78","index: 1986 Mar<br />value: 347.68","index: 1986 Apr<br />value: 349.37","index: 1986 May<br />value: 350.03","index: 1986 Jun<br />value: 349.37","index: 1986 Jul<br />value: 347.76","index: 1986 Aug<br />value: 345.73","index: 1986 Sep<br />value: 344.68","index: 1986 Oct<br />value: 343.99","index: 1986 Nov<br />value: 345.48","index: 1986 Dec<br />value: 346.72","index: 1987 Jan<br />value: 347.84","index: 1987 Feb<br />value: 348.29","index: 1987 Mar<br />value: 349.23","index: 1987 Apr<br />value: 350.80","index: 1987 May<br />value: 351.66","index: 1987 Jun<br />value: 351.07","index: 1987 Jul<br />value: 349.33","index: 1987 Aug<br />value: 347.92","index: 1987 Sep<br />value: 346.27","index: 1987 Oct<br />value: 346.18","index: 1987 Nov<br />value: 347.64","index: 1987 Dec<br />value: 348.78","index: 1988 Jan<br />value: 350.25","index: 1988 Feb<br />value: 351.54","index: 1988 Mar<br />value: 352.05","index: 1988 Apr<br />value: 353.41","index: 1988 May<br />value: 354.04","index: 1988 Jun<br />value: 353.62","index: 1988 Jul<br />value: 352.22","index: 1988 Aug<br />value: 350.27","index: 1988 Sep<br />value: 348.55","index: 1988 Oct<br />value: 348.72","index: 1988 Nov<br />value: 349.91","index: 1988 Dec<br />value: 351.18","index: 1989 Jan<br />value: 352.60","index: 1989 Feb<br />value: 352.92","index: 1989 Mar<br />value: 353.53","index: 1989 Apr<br />value: 355.26","index: 1989 May<br />value: 355.52","index: 1989 Jun<br />value: 354.97","index: 1989 Jul<br />value: 353.75","index: 1989 Aug<br />value: 351.52","index: 1989 Sep<br />value: 349.64","index: 1989 Oct<br />value: 349.83","index: 1989 Nov<br />value: 351.14","index: 1989 Dec<br />value: 352.37","index: 1990 Jan<br />value: 353.50","index: 1990 Feb<br />value: 354.55","index: 1990 Mar<br />value: 355.23","index: 1990 Apr<br />value: 356.04","index: 1990 May<br />value: 357.00","index: 1990 Jun<br />value: 356.07","index: 1990 Jul<br />value: 354.67","index: 1990 Aug<br />value: 352.76","index: 1990 Sep<br />value: 350.82","index: 1990 Oct<br />value: 351.04","index: 1990 Nov<br />value: 352.69","index: 1990 Dec<br />value: 354.07","index: 1991 Jan<br />value: 354.59","index: 1991 Feb<br />value: 355.63","index: 1991 Mar<br />value: 357.03","index: 1991 Apr<br />value: 358.48","index: 1991 May<br />value: 359.22","index: 1991 Jun<br />value: 358.12","index: 1991 Jul<br />value: 356.06","index: 1991 Aug<br />value: 353.92","index: 1991 Sep<br />value: 352.05","index: 1991 Oct<br />value: 352.11","index: 1991 Nov<br />value: 353.64","index: 1991 Dec<br />value: 354.89","index: 1992 Jan<br />value: 355.88","index: 1992 Feb<br />value: 356.63","index: 1992 Mar<br />value: 357.72","index: 1992 Apr<br />value: 359.07","index: 1992 May<br />value: 359.58","index: 1992 Jun<br />value: 359.17","index: 1992 Jul<br />value: 356.94","index: 1992 Aug<br />value: 354.92","index: 1992 Sep<br />value: 352.94","index: 1992 Oct<br />value: 353.23","index: 1992 Nov<br />value: 354.09","index: 1992 Dec<br />value: 355.33","index: 1993 Jan<br />value: 356.63","index: 1993 Feb<br />value: 357.10","index: 1993 Mar<br />value: 358.32","index: 1993 Apr<br />value: 359.41","index: 1993 May<br />value: 360.23","index: 1993 Jun<br />value: 359.55","index: 1993 Jul<br />value: 357.53","index: 1993 Aug<br />value: 355.48","index: 1993 Sep<br />value: 353.67","index: 1993 Oct<br />value: 353.95","index: 1993 Nov<br />value: 355.30","index: 1993 Dec<br />value: 356.78","index: 1994 Jan<br />value: 358.34","index: 1994 Feb<br />value: 358.89","index: 1994 Mar<br />value: 359.95","index: 1994 Apr<br />value: 361.25","index: 1994 May<br />value: 361.67","index: 1994 Jun<br />value: 360.94","index: 1994 Jul<br />value: 359.55","index: 1994 Aug<br />value: 357.49","index: 1994 Sep<br />value: 355.84","index: 1994 Oct<br />value: 356.00","index: 1994 Nov<br />value: 357.59","index: 1994 Dec<br />value: 359.05","index: 1995 Jan<br />value: 359.98","index: 1995 Feb<br />value: 361.03","index: 1995 Mar<br />value: 361.66","index: 1995 Apr<br />value: 363.48","index: 1995 May<br />value: 363.82","index: 1995 Jun<br />value: 363.30","index: 1995 Jul<br />value: 361.94","index: 1995 Aug<br />value: 359.50","index: 1995 Sep<br />value: 358.11","index: 1995 Oct<br />value: 357.80","index: 1995 Nov<br />value: 359.61","index: 1995 Dec<br />value: 360.74","index: 1996 Jan<br />value: 362.09","index: 1996 Feb<br />value: 363.29","index: 1996 Mar<br />value: 364.06","index: 1996 Apr<br />value: 364.76","index: 1996 May<br />value: 365.45","index: 1996 Jun<br />value: 365.01","index: 1996 Jul<br />value: 363.70","index: 1996 Aug<br />value: 361.54","index: 1996 Sep<br />value: 359.51","index: 1996 Oct<br />value: 359.65","index: 1996 Nov<br />value: 360.80","index: 1996 Dec<br />value: 362.38","index: 1997 Jan<br />value: 363.23","index: 1997 Feb<br />value: 364.06","index: 1997 Mar<br />value: 364.61","index: 1997 Apr<br />value: 366.40","index: 1997 May<br />value: 366.84","index: 1997 Jun<br />value: 365.68","index: 1997 Jul<br />value: 364.52","index: 1997 Aug<br />value: 362.57","index: 1997 Sep<br />value: 360.24","index: 1997 Oct<br />value: 360.83","index: 1997 Nov<br />value: 362.49","index: 1997 Dec<br />value: 364.34"],"type":"scatter","mode":"lines","line":{"width":1.8897637795275593,"color":"rgba(70,130,180,1)","dash":"solid"},"hoveron":"points","showlegend":false,"xaxis":"x","yaxis":"y","hoverinfo":"text","frame":null}],"layout":{"margin":{"t":48.146118721461193,"r":7.3059360730593621,"b":44.56621004566211,"l":43.105022831050235},"plot_bgcolor":"rgba(235,235,235,1)","paper_bgcolor":"rgba(255,255,255,1)","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724},"title":{"text":"Interactive CO₂ Time Series","font":{"color":"rgba(0,0,0,1)","family":"","size":17.534246575342465},"x":0,"xref":"paper"},"xaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[-4728.6999999999998,10906.700000000001],"tickmode":"array","ticktext":["1960 Jan","1970 Jan","1980 Jan","1990 Jan"],"tickvals":[-3653,0,3652.0000000000009,7305.0000000000009],"categoryorder":"array","categoryarray":["1960 Jan","1970 Jan","1980 Jan","1990 Jan"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"y","title":{"text":"Date","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"yaxis":{"domain":[0,1],"automargin":true,"type":"linear","autorange":false,"range":[310.49700000000001,369.52299999999997],"tickmode":"array","ticktext":["320","330","340","350","360"],"tickvals":[320,330,340,350,360],"categoryorder":"array","categoryarray":["320","330","340","350","360"],"nticks":null,"ticks":"outside","tickcolor":"rgba(51,51,51,1)","ticklen":3.6529680365296811,"tickwidth":0.66417600664176002,"showticklabels":true,"tickfont":{"color":"rgba(77,77,77,1)","family":"","size":11.68949771689498},"tickangle":-0,"showline":false,"linecolor":null,"linewidth":0,"showgrid":true,"gridcolor":"rgba(255,255,255,1)","gridwidth":0.66417600664176002,"zeroline":false,"anchor":"x","title":{"text":"ppm","font":{"color":"rgba(0,0,0,1)","family":"","size":14.611872146118724}},"hoverformat":".2f"},"shapes":[{"type":"rect","fillcolor":null,"line":{"color":null,"width":0,"linetype":[]},"yref":"paper","xref":"paper","x0":0,"x1":1,"y0":0,"y1":1}],"showlegend":false,"legend":{"bgcolor":"rgba(255,255,255,1)","bordercolor":"transparent","borderwidth":1.8897637795275593,"font":{"color":"rgba(0,0,0,1)","family":"","size":11.68949771689498}},"hovermode":"closest","barmode":"relative"},"config":{"doubleClick":"reset","modeBarButtonsToAdd":["hoverclosest","hovercompare"],"showSendToCloud":false},"source":"A","attrs":{"ddcc18f11b2c":{"x":{},"y":{},"type":"scatter"},"ddcc7d2ef27e":{"x":{},"y":{}}},"cur_data":"ddcc18f11b2c","visdat":{"ddcc18f11b2c":["function (y) ","x"],"ddcc7d2ef27e":["function (y) ","x"]},"highlight":{"on":"plotly_click","persistent":false,"dynamic":false,"selectize":false,"opacityDim":0.20000000000000001,"selected":{"opacity":1},"debounce":0},"shinyEvents":["plotly_hover","plotly_click","plotly_selected","plotly_relayout","plotly_brushed","plotly_brushing","plotly_clickannotation","plotly_doubleclick","plotly_deselect","plotly_afterplot","plotly_sunburstclick"],"base_url":"https://plot.ly"},"evals":[],"jsHooks":[]}</script>
</div>
</div>
</section>
<section id="assignment" class="slide level2">
<h2>Assignment</h2>
<p>In this activity, you will download streamflow data from the Cache la Poudre River (USGS site 06752260) and analyze it using a few time series methods.</p>
<p>First, use this code to download the data from the USGS site.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a></a><span class="fu">library</span>(dataRetrieval)</span>
<span id="cb38-2"><a></a></span>
<span id="cb38-3"><a></a><span class="co"># Example: Cache la Poudre River at Mouth (USGS site 06752260)</span></span>
<span id="cb38-4"><a></a>poudre_flow <span class="ot">&lt;-</span> <span class="fu">readNWISdv</span>(<span class="at">siteNumber =</span> <span class="st">"06752260"</span>,    <span class="co"># Download data from USGS for site 06752260</span></span>
<span id="cb38-5"><a></a>                          <span class="at">parameterCd =</span> <span class="st">"00060"</span>,      <span class="co"># Parameter code 00060 = discharge in cfs)</span></span>
<span id="cb38-6"><a></a>                          <span class="at">startDate =</span> <span class="st">"2013-01-01"</span>,   <span class="co"># Set the start date</span></span>
<span id="cb38-7"><a></a>                          <span class="at">endDate =</span> <span class="st">"2023-12-31"</span>) <span class="sc">|&gt;</span>  <span class="co"># Set the end date</span></span>
<span id="cb38-8"><a></a>  <span class="fu">renameNWISColumns</span>() <span class="sc">|&gt;</span>                              <span class="co"># Rename columns to standard names (e.g., "Flow", "Date")</span></span>
<span id="cb38-9"><a></a>  <span class="fu">mutate</span>(<span class="at">Date =</span> <span class="fu">yearmonth</span>(Date)) <span class="sc">|&gt;</span>                   <span class="co"># Convert daily Date values into a year-month format (e.g., "2023 Jan")</span></span>
<span id="cb38-10"><a></a>  <span class="fu">group_by</span>(Date) <span class="sc">|&gt;</span>                                   <span class="co"># Group the data by the new monthly Date</span></span>
<span id="cb38-11"><a></a>  <span class="fu">summarise</span>(<span class="at">Flow =</span> <span class="fu">mean</span>(Flow))                       <span class="co"># Calculate the average daily flow for each month</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="assignment-1" class="slide level2 smaller">
<h2>Assignment</h2>
<h4 id="convert-to-tsibble">1. Convert to tsibble</h4>
<ul>
<li>Use <code>as_tsibble()</code> to convert the data.frame into a tsibble object. This will allow you to use the <code>feast</code> functions for time series analysis.</li>
</ul>
<h4 id="plotting-the-time-series">2. Plotting the time series</h4>
<ul>
<li>Use <code>ggplot</code> to plot the time series data. Animate this plot with plotly</li>
</ul>
<h4 id="subseries">3. Subseries</h4>
<ul>
<li><p>Use <code>gg_subseries</code> to visualize the seasonal patterns in the data. This will help you identify any trends or seasonal cycles in the streamflow data.</p></li>
<li><p>Describe what you see in the plot. How are “seasons” defined in this plot? What do you think the “subseries” represent?</p></li>
</ul>
</section>
<section id="section-1" class="slide level2">
<h2></h2>
<h4 id="decompose">4. Decompose</h4>
<ul>
<li><p>Use the <code>model(STL(...))</code> pattern to decompose the time series data into its components: trend, seasonality, and residuals. Chose a window that you feel is most appropriate to this data…</p></li>
<li><p>Describe what you see in the plot. How do the components change over time? What do you think the trend and seasonal components represent?</p></li>
</ul>
<h4 id="submission">Submission</h4>
<ul>
<li><p>Upload a rendered qmd file to the course website. Make sure to include your code and any plots you created.</p></li>
<li><p>This should be an HTML file with <code>self-contained: true</code>.</p></li>
<li><p>It should not point to a local host, and must be the physical file.</p></li>
<li><p>Make sure to include your code and any plots you created and that the outputs render as you expect.</p></li>
</ul>


</section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../csu-rams-logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://github.com/mikejohnson51/csu-ess-330/">ESS 330: Quantitative Reasoning for Ecosystem Science</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 720,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script>
      Reveal.addEventListener( 'slidechanged', function( event ) {
        console.log("hello")
        
        slide_id = event.currentSlide.id
        link = "annotations" + ".html#" + slide_id
        
        var annotation_div = document.createElement('div')
        annotation_div.setAttribute("class", "annotation-link")
        
        var notes_link = document.createElement('a')
        notes_link.setAttribute("href", link)
        notes_link.setAttribute("target", "_blank")
        
        var iii = document.createElement('i')
        iii.setAttribute("class", "fa fa-info")
        notes_link.appendChild(iii)
        
        annotation_div.appendChild(notes_link)
        
        var tmp = event.currentTarget.getElementsByClassName("annotation-link")
        if (tmp.length === 1) {
          tmp[0].remove()
        }
        
        if (event.currentSlide.classList.contains("annotation")) {
          event.currentTarget.append(annotation_div)
        }
      } );

    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>