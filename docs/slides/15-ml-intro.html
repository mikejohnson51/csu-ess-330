<!DOCTYPE html>
<html lang="en"><head>
<link href="../favicon.ico" rel="icon">
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-html/tabby.min.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/light-border.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-549806ee2085284f45b00abea8c6df48.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.6.40">

  <title>ESS 330 – Lecture 15</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="../site_libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
      vertical-align: middle;
    }
    /* CSS for syntax highlighting */
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; font-weight: bold; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="../site_libs/revealjs/dist/theme/quarto-be8ed9a3cdcbe7a498a633334f8d1033.css">
  <link href="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="../site_libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
<script src="https://use.fontawesome.com/5235085b15.js"></script>
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-color="#1E4D2B" class="quarto-title-block center">
  <h1 class="title">Lecture 15</h1>
  <p class="subtitle">Machine Learning &amp; Data Budgets</p>

<div class="quarto-title-authors">
</div>

</section>
<section id="key-take-aways" class="slide level2">
<h2>Key Take Aways:</h2>
<p>As of 11PM last night 36/86 students have completed the feedback survey.</p>
<ol type="1">
<li>Most peole are feeling very confident with Unit 1, but not with Unit 2…</li>
</ol>
<p>(Please remeber the general feelings after unit 1)</p>

<img data-src="images/unit-1-checkin.png" width="361" class="r-stretch"></section>
<section class="slide level2">

<ol start="2" type="1">
<li>There is a general feeling of wanting to memorize the functions, and it being limited by the speed of the course.</li>
</ol>
<blockquote>
<p>To be a great scientist, coding isn’t about memorizing functions — it’s about understanding concepts, problem-solving, and knowing how to find and apply the right tools. Developers frequently reference documentation, libraries, and online resources to write efficient code. The key skills are logical thinking, debugging, and structuring solutions. From the feedback, this is something that students are proud of improving.</p>
</blockquote>
<ol start="3" type="1">
<li>There is a beleif that this is an intro class, however it is a 300 level course. While we are introducing R as a tool, our goal is to help you think about data in a simular way as your computer, and plan for ways to answers questions whether with a model, statistical test, visualization, or report.</li>
</ol>
<blockquote>
<p>Our goal as the teaching team to is <em>expose</em> you to the foundational concepts so that you are more ready to think in this way (quantitiative reasoning aspect of the course). The generous grading policy is to help you learn and grow in this way.</p>
</blockquote>
<ol start="4" type="1">
<li>There is a general feeling of not making as fast of progress as hoped, but feeling really proad of the progress made.</li>
</ol>
<blockquote>
<p>I am not kidding when I say it took me 5+ years to get comfortable with R and to feel I could write a significant amount of code without the help docs, or stackoverflow (pre-chatGPT days). That said I still spend a significant amount of time on them. That part will never go away.</p>
</blockquote>
</section>
<section class="slide level2">

<ol start="5" type="1">
<li>There is a hope for different office hours…</li>
</ol>
<blockquote>
<p>How would 230-330pm on Mondays/Wednesdays work for everyone?</p>
</blockquote>
<ol start="6" type="1">
<li>Almost everyone mentioned feeling proud of the progress they have made.</li>
</ol>
<blockquote>
<p>That makes us so happy and we hope to be able supporting that. I can promise you, that already you are more equipt then most undergrads I interview coming out of environmental science programs.</p>
</blockquote>
<p>I will report back with more if more submit.</p>
</section>
<section id="grades-pre-regrades-36-of-the-class-asked-for-at-least-one-regrade" class="slide level2">
<h2>Grades: Pre-regrades (36% of the class asked for at least one regrade)</h2>
<table class="caption-top">
<colgroup>
<col style="width: 33%">
<col style="width: 33%">
<col style="width: 33%">
</colgroup>
<thead>
<tr class="header">
<th>Letter</th>
<th>Current ESS 330 distribution</th>
<th>Past distribution for simular classes</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>A</td>
<td>41%</td>
<td>50%</td>
</tr>
<tr class="even">
<td>B</td>
<td>19%</td>
<td>20%</td>
</tr>
<tr class="odd">
<td>C</td>
<td>14%</td>
<td>5%</td>
</tr>
<tr class="even">
<td>D</td>
<td>1%</td>
<td>0%</td>
</tr>
<tr class="odd">
<td>F</td>
<td>25%</td>
<td>25%</td>
</tr>
</tbody>
</table>
<p>Of those current with F’s: The average points obtained are 79/389 = 20%.</p>
<ul>
<li>Lab Attendence: 74%</li>
<li>Lab scores: 32%</li>
<li>Daily Exercises: 28%</li>
<li>EC Attendence day: 9 were attending, 12 were not.</li>
</ul>
<p>On average 66 students are submitting work each week meaning 22% of students are not submitting work.</p>
<p>If you are not happy where you stand, will work with you but time is running out!!</p>
</section>
<section id="unit-3-modeling-machine-learning" class="slide level2">
<h2>Unit 3: Modeling (Machine Learning)</h2>

<img data-src="https://imgs.xkcd.com/comics/machine_learning.png" class="quarto-figure quarto-figure-center r-stretch"><div class="footer">
<p><a href="https://xkcd.com/1838/" class="uri">https://xkcd.com/1838/</a></p>
</div>
</section>
<section id="what-is-machine-learning" class="slide level2">
<h2>What is machine learning?</h2>
<p><img data-src="images/what_is_ml.png" class="absolute" style="z-index: -1;top: 0px; left: 150px; "></p>
<div class="footer">
<p>Illustration credit: <a href="https://vas3k.com/blog/machine_learning/" class="uri">https://vas3k.com/blog/machine_learning/</a></p>
</div>
</section>
<section id="what-is-machine-learning-2025-edition" class="slide level2">
<h2>What is machine learning? (2025 edition)</h2>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>In the early 2010s, “Artificial intelligence” (AI) was largely synonymous with what we’ll refer to as “machine learning” in this workshop. In the late 2010s and early 2020s, AI usually referred to deep learning methods. Since the release of ChatGPT in late 2022, “AI” has come to also encompass large language models (LLMs) / generative models.</p>
</div>
</div>
</div>
<p><img data-src="images/what_is_ml_expanding.gif" class="absolute" style="z-index: -1;top: 150px; left: 150px; "></p>
<div class="footer">
<p>Illustration credit: <a href="https://vas3k.com/blog/machine_learning/" class="uri">https://vas3k.com/blog/machine_learning/</a></p>
</div>
</section>
<section id="classic-conceptual-model" class="slide level2">
<h2>Classic Conceptual Model</h2>

<img data-src="images/ml_illustration.jpg" class="quarto-figure quarto-figure-center r-stretch"><div class="footer">
<p>Illustration credit: <a href="https://vas3k.com/blog/machine_learning/" class="uri">https://vas3k.com/blog/machine_learning/</a></p>
</div>
</section>
<section id="what-is-tidymodels" class="slide level2">
<h2>What is <code>tidymodels</code>? <img data-src="hexes/tidymodels.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a></a><span class="fu">library</span>(tidymodels)</span>
<span id="cb1-2"><a></a><span class="co">#&gt; ── Attaching packages ────────────────────────────────────── tidymodels 1.2.0 ──</span></span>
<span id="cb1-3"><a></a><span class="co">#&gt; ✔ broom        1.0.7     ✔ recipes      1.1.1</span></span>
<span id="cb1-4"><a></a><span class="co">#&gt; ✔ dials        1.4.0     ✔ rsample      1.2.1</span></span>
<span id="cb1-5"><a></a><span class="co">#&gt; ✔ dplyr        1.1.4     ✔ tibble       3.2.1</span></span>
<span id="cb1-6"><a></a><span class="co">#&gt; ✔ ggplot2      3.5.1     ✔ tidyr        1.3.1</span></span>
<span id="cb1-7"><a></a><span class="co">#&gt; ✔ infer        1.0.7     ✔ tune         1.3.0</span></span>
<span id="cb1-8"><a></a><span class="co">#&gt; ✔ modeldata    1.4.0     ✔ workflows    1.2.0</span></span>
<span id="cb1-9"><a></a><span class="co">#&gt; ✔ parsnip      1.3.0     ✔ workflowsets 1.1.0</span></span>
<span id="cb1-10"><a></a><span class="co">#&gt; ✔ purrr        1.0.4     ✔ yardstick    1.3.2</span></span>
<span id="cb1-11"><a></a><span class="co">#&gt; ── Conflicts ───────────────────────────────────────── tidymodels_conflicts() ──</span></span>
<span id="cb1-12"><a></a><span class="co">#&gt; ✖ purrr::discard() masks scales::discard()</span></span>
<span id="cb1-13"><a></a><span class="co">#&gt; ✖ dplyr::filter()  masks stats::filter()</span></span>
<span id="cb1-14"><a></a><span class="co">#&gt; ✖ dplyr::lag()     masks stats::lag()</span></span>
<span id="cb1-15"><a></a><span class="co">#&gt; ✖ recipes::step()  masks stats::step()</span></span>
<span id="cb1-16"><a></a><span class="co">#&gt; • Dig deeper into tidy modeling with R at https://www.tmwr.org</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section" class="slide level2" data-background-image="images/tm-org.png" data-background-size="contain">
<h2></h2>
</section>
<section id="the-big-picture-road-map" class="slide level2">
<h2>The big picture: Road map</h2>
<div class="{columns}">
<div class="column" style="width:40%;">
<p>Week 1: - – <strong>Today</strong>: Sampling &amp; Data Handling - – <strong>03/26</strong>: Model Workflows Week 2: - – <strong>03/31</strong>: Types of Models - – <strong>04/02</strong>: Model Evaluation Week 3: - – <strong>04/07</strong>: Full Process - – <strong>04/09</strong>: Live Demo</p>
</div><div class="column" style="width:60%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/whole-game-final-performance.jpg" class="quarto-figure quarto-figure-center" width="1772"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="today-data" class="slide level2">
<h2>Today: data</h2>
<ul>
<li><p>In any modeling effort, it’s crucial to evaluate the performance of a model using different validation techniques to ensure a model can generalize to unseen data.</p></li>
<li><p>But data is limited even in the age of “big data”.</p></li>
</ul>

<img data-src="images/whole-game-split.jpg" class="quarto-figure quarto-figure-center r-stretch" width="488"></section>
<section id="our-typical-process-will-like-this" class="slide level2">
<h2>Our typical process will like this:</h2>
<ol type="1">
<li>Read in raw data (<code>readr</code>, <code>dplyr::*_join</code>) (single or multi table)</li>
</ol>
<div class="fragment">
<ol start="2" type="1">
<li>Prepare the data (EDA/mutate/summarize/clean, etc)</li>
</ol>
<ul>
<li>This is “Feature Engineering”</li>
</ul>
</div>
<div class="fragment">
<ol start="3" type="1">
<li>Once we’ve established our features (rows), we decide how to “spend” them …</li>
</ol>
</div>
<div class="fragment">
<p>For machine learning, we typically split data into <strong>training</strong> and <strong>test</strong> sets:</p>
</div>
<div class="fragment">
<ul>
<li><p>The <strong>training set</strong> is used to estimate model parameters.</p></li>
<li><p>Spending too much data in <strong>training</strong> prevents us from computing a good assessment of model <strong>performance</strong>.</p></li>
</ul>
</div>
<div class="fragment">
<ul>
<li><p>The <strong>test set</strong> is used as an independent assessment of performance.</p></li>
<li><p>Spending too much data in <strong>testing</strong> prevents us from computing good model parameter estimates.</p></li>
</ul>
</div>
</section>
<section id="how-we-split-data" class="slide level2">
<h2>How we split data</h2>

<img data-src="15-ml-intro_files/figure-revealjs/test-train-split-1.png" width="1152" class="r-stretch"><div class="fragment">
<ul>
<li><p>Splitting can be handled in many of ways. Typically, we base it off of a “hold out” percentage (e.g.&nbsp;20%)</p></li>
<li><p>These hold out cases are extracted randomly from the data set. (remember seeds?)</p></li>
</ul>
</div>
<div class="fragment">
<ul>
<li>The <strong>training</strong> set is usually the majority of the data and provides a sandbox for testing different modeling appraoches.</li>
</ul>
</div>
<div class="fragment">
<ul>
<li><p>The <strong>test</strong> set is held in reserve until one or two models are chosen.</p></li>
<li><p>The <strong>test</strong> set is then used as the final arbiter to determine the efficacy of the model.</p></li>
</ul>
</div>
</section>
<section id="startification" class="slide level2">
<h2>Startification</h2>
<ul>
<li><p>In many cases, there is a structure to the data that would inhibit inpartial spliiting (e.g.&nbsp;a class, a region, a species, a sex, etc)</p></li>
<li><p>Imagine you have a jar of M&amp;Ms in different colors — red, blue, and green. You want to take some candies out to taste, but you want to make sure you get a fair mix of each color, not just grabbing a bunch of red ones by accident.</p></li>
<li><p>Stratified resampling is like making sure that if your jar is 50% red, 30% blue, and 20% green, then the handful of candies you take keeps the same balance.</p></li>
<li><p>In data science, we do the same thing when we pick samples from a dataset: we make sure that different groups (like categories of people, animals, or weather types) are still fairly represented!</p></li>
</ul>
</section>
<section id="initial-splits" class="slide level2">
<h2>Initial splits <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<ul>
<li>In <code>tidymodels</code>, the <code>rsample</code> package provides functions for creating initial splits of data.</li>
<li>The <code>initial_split()</code> function is used to create a single split of the data.</li>
<li>The <code>prop</code> argument defines the proportion of the data to be used for training.</li>
<li>The default is 0.75, which means 75% of the data will be used for training and 25% for testing.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a></a><span class="fu">set.seed</span>(<span class="dv">101991</span>)</span>
<span id="cb2-2"><a></a>(resample_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(penguins, <span class="at">prop =</span> <span class="fl">0.8</span>))</span>
<span id="cb2-3"><a></a><span class="co">#&gt; &lt;Training/Testing/Total&gt;</span></span>
<span id="cb2-4"><a></a><span class="co">#&gt; &lt;275/69/344&gt;</span></span>
<span id="cb2-5"><a></a></span>
<span id="cb2-6"><a></a><span class="co">#Sanity check</span></span>
<span id="cb2-7"><a></a><span class="dv">69</span><span class="sc">/</span><span class="dv">344</span></span>
<span id="cb2-8"><a></a><span class="co">#&gt; [1] 0.2005814</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="accessing-the-data" class="slide level2">
<h2>Accessing the data: <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<ul>
<li>Once the data is split, we can access the training and testing data using the <code>training()</code> and <code>testing()</code> functions to extract the partitioned data from the full set:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a></a>penguins_train <span class="ot">&lt;-</span> <span class="fu">training</span>(resample_split)</span>
<span id="cb3-2"><a></a><span class="fu">glimpse</span>(penguins_train)</span>
<span id="cb3-3"><a></a><span class="co">#&gt; Rows: 275</span></span>
<span id="cb3-4"><a></a><span class="co">#&gt; Columns: 7</span></span>
<span id="cb3-5"><a></a><span class="co">#&gt; $ species           &lt;fct&gt; Gentoo, Adelie, Gentoo, Chinstrap, Gentoo, Chinstrap…</span></span>
<span id="cb3-6"><a></a><span class="co">#&gt; $ island            &lt;fct&gt; Biscoe, Torgersen, Biscoe, Dream, Biscoe, Dream, Dre…</span></span>
<span id="cb3-7"><a></a><span class="co">#&gt; $ bill_length_mm    &lt;dbl&gt; 46.2, 43.1, 46.2, 45.9, 46.5, 48.1, 45.2, 55.9, 38.1…</span></span>
<span id="cb3-8"><a></a><span class="co">#&gt; $ bill_depth_mm     &lt;dbl&gt; 14.9, 19.2, 14.4, 17.1, 13.5, 16.4, 17.8, 17.0, 17.0…</span></span>
<span id="cb3-9"><a></a><span class="co">#&gt; $ flipper_length_mm &lt;int&gt; 221, 197, 214, 190, 210, 199, 198, 228, 181, 195, 20…</span></span>
<span id="cb3-10"><a></a><span class="co">#&gt; $ body_mass_g       &lt;int&gt; 5300, 3500, 4650, 3575, 4550, 3325, 3950, 5600, 3175…</span></span>
<span id="cb3-11"><a></a><span class="co">#&gt; $ sex               &lt;fct&gt; male, male, NA, female, female, female, female, male…</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a></a>penguins_test <span class="ot">&lt;-</span> <span class="fu">testing</span>(resample_split)</span>
<span id="cb4-2"><a></a><span class="fu">glimpse</span>(penguins_test)</span>
<span id="cb4-3"><a></a><span class="co">#&gt; Rows: 69</span></span>
<span id="cb4-4"><a></a><span class="co">#&gt; Columns: 7</span></span>
<span id="cb4-5"><a></a><span class="co">#&gt; $ species           &lt;fct&gt; Adelie, Adelie, Adelie, Adelie, Adelie, Adelie, Adel…</span></span>
<span id="cb4-6"><a></a><span class="co">#&gt; $ island            &lt;fct&gt; Torgersen, Torgersen, Torgersen, Biscoe, Biscoe, Bis…</span></span>
<span id="cb4-7"><a></a><span class="co">#&gt; $ bill_length_mm    &lt;dbl&gt; NA, 39.3, 36.6, 35.9, 38.8, 37.9, 39.2, 39.6, 36.7, …</span></span>
<span id="cb4-8"><a></a><span class="co">#&gt; $ bill_depth_mm     &lt;dbl&gt; NA, 20.6, 17.8, 19.2, 17.2, 18.6, 21.1, 17.2, 18.8, …</span></span>
<span id="cb4-9"><a></a><span class="co">#&gt; $ flipper_length_mm &lt;int&gt; NA, 190, 185, 189, 180, 172, 196, 196, 187, 205, 187…</span></span>
<span id="cb4-10"><a></a><span class="co">#&gt; $ body_mass_g       &lt;int&gt; NA, 3650, 3700, 3800, 3800, 3150, 4150, 3550, 3800, …</span></span>
<span id="cb4-11"><a></a><span class="co">#&gt; $ sex               &lt;fct&gt; NA, male, female, female, male, female, male, female…</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div>
</section>
<section id="proportional-gaps" class="slide level2">
<h2>Proportional Gaps</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a></a><span class="co"># Dataset</span></span>
<span id="cb5-2"><a></a>(<span class="fu">table</span>(penguins<span class="sc">$</span>species) <span class="sc">/</span> <span class="fu">nrow</span>(penguins))</span>
<span id="cb5-3"><a></a><span class="co">#&gt; </span></span>
<span id="cb5-4"><a></a><span class="co">#&gt;    Adelie Chinstrap    Gentoo </span></span>
<span id="cb5-5"><a></a><span class="co">#&gt; 0.4418605 0.1976744 0.3604651</span></span>
<span id="cb5-6"><a></a><span class="co"># Training Data</span></span>
<span id="cb5-7"><a></a>(<span class="fu">table</span>(penguins_train<span class="sc">$</span>species) <span class="sc">/</span> <span class="fu">nrow</span>(penguins_train))</span>
<span id="cb5-8"><a></a><span class="co">#&gt; </span></span>
<span id="cb5-9"><a></a><span class="co">#&gt;    Adelie Chinstrap    Gentoo </span></span>
<span id="cb5-10"><a></a><span class="co">#&gt; 0.4581818 0.1818182 0.3600000</span></span>
<span id="cb5-11"><a></a><span class="co"># Testing Data</span></span>
<span id="cb5-12"><a></a>(<span class="fu">table</span>(penguins_test<span class="sc">$</span>species) <span class="sc">/</span> <span class="fu">nrow</span>(penguins_test))</span>
<span id="cb5-13"><a></a><span class="co">#&gt; </span></span>
<span id="cb5-14"><a></a><span class="co">#&gt;    Adelie Chinstrap    Gentoo </span></span>
<span id="cb5-15"><a></a><span class="co">#&gt; 0.3768116 0.2608696 0.3623188</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="stratification-example" class="slide level2">
<h2>Stratification Example</h2>
<ul>
<li><p>A stratified random sample conducts a specified split within defined subsets of subsets, and then pools the results.</p></li>
<li><p>Only one column can be used to define a strata but grouping/mutate opperations can be used to create a new column that can be used as a strata (e.g.&nbsp;species/island)</p></li>
<li><p>In the case of the penguins data, we can stratify by species (think back to our nested/linear model appraoch)</p></li>
<li><p>This ensures that the training and testing sets have the same proportion of each species as the original data.</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb6"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb6-1"><a></a><span class="co"># Set the seed</span></span>
<span id="cb6-2"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb6-3"><a></a></span>
<span id="cb6-4"><a></a><span class="co"># Drop missing values and split the data</span></span>
<span id="cb6-5"><a></a>penguins <span class="ot">&lt;-</span> <span class="fu">drop_na</span>(penguins)</span>
<span id="cb6-6"><a></a>penguins_strata <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(penguins, <span class="at">strata =</span> species, <span class="at">prop =</span> .<span class="dv">8</span>)</span>
<span id="cb6-7"><a></a></span>
<span id="cb6-8"><a></a><span class="co"># Extract the training and testing sets</span></span>
<span id="cb6-9"><a></a></span>
<span id="cb6-10"><a></a>train_strata <span class="ot">&lt;-</span> <span class="fu">training</span>(penguins_strata)</span>
<span id="cb6-11"><a></a>test_strata  <span class="ot">&lt;-</span> <span class="fu">testing</span>(penguins_strata)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="proportional-alignment" class="slide level2">
<h2>Proportional Alignment</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a></a><span class="co"># Check the proportions</span></span>
<span id="cb7-2"><a></a><span class="co"># Dataset</span></span>
<span id="cb7-3"><a></a><span class="fu">table</span>(penguins<span class="sc">$</span>species) <span class="sc">/</span> <span class="fu">nrow</span>(penguins)</span>
<span id="cb7-4"><a></a><span class="co">#&gt; </span></span>
<span id="cb7-5"><a></a><span class="co">#&gt;    Adelie Chinstrap    Gentoo </span></span>
<span id="cb7-6"><a></a><span class="co">#&gt; 0.4384384 0.2042042 0.3573574</span></span>
<span id="cb7-7"><a></a><span class="co"># Training Data</span></span>
<span id="cb7-8"><a></a><span class="fu">table</span>(train_strata<span class="sc">$</span>species) <span class="sc">/</span> <span class="fu">nrow</span>(train_strata)</span>
<span id="cb7-9"><a></a><span class="co">#&gt; </span></span>
<span id="cb7-10"><a></a><span class="co">#&gt;    Adelie Chinstrap    Gentoo </span></span>
<span id="cb7-11"><a></a><span class="co">#&gt; 0.4377358 0.2037736 0.3584906</span></span>
<span id="cb7-12"><a></a><span class="co"># Testing Data</span></span>
<span id="cb7-13"><a></a><span class="fu">table</span>(test_strata<span class="sc">$</span>species) <span class="sc">/</span> <span class="fu">nrow</span>(test_strata)</span>
<span id="cb7-14"><a></a><span class="co">#&gt; </span></span>
<span id="cb7-15"><a></a><span class="co">#&gt;    Adelie Chinstrap    Gentoo </span></span>
<span id="cb7-16"><a></a><span class="co">#&gt; 0.4411765 0.2058824 0.3529412</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="modeling" class="slide level2">
<h2>Modeling</h2>
<div class="{columns}">
<div class="column" style="width:50%;">
<ul>
<li><p>Once the data is split, we can decide what type of model to invoke.</p></li>
<li><p>Often, users simply pick a well known model type or class for a type of problem (Classic Conceptual Model)</p></li>
<li><p>We will learn more about model types and uses next week!</p></li>
<li><p>For now, just know that the <strong>training</strong> data is used to fit a model.</p></li>
<li><p>If we are certain about the model, we can use the <strong>test</strong> data to evaluate the model.</p></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="images/whole-game-split.jpg" style="width:45.0%"></p>
</figure>
</div>
</div>
</div>
<div class="cell">
<div class="cell-output-display">
<div>
<figure>
<p><img data-src="images/whole-game-model-1.jpg" style="width:200.0%"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="modeling-options" class="slide level2">
<h2>Modeling Options</h2>
<ul>
<li><p>But, there are many types of models, with different assumptions, behaviors, and qualities, that make some more applicable to a given dataset!</p></li>
<li><p>Most models have some type of parmeterization, that can often be <em>tuned</em>.</p></li>
<li><p>Testing combinations of model and tuning parmaters also requires some combintation of <code>training</code>/<code>testing</code> splits.</p></li>
</ul>

<img data-src="images/whole-game-model-n.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"></section>
<section id="modeling-options-1" class="slide level2">
<h2>Modeling Options</h2>
<p>What if we want to compare more models?</p>
<div class="fragment">
<p>And/or more model configurations?</p>
</div>
<div class="fragment">
<p>And we want to understand if these are important differences?</p>
</div>
<div class="fragment">
<p>How can we use the <em>training</em> data to compare and evaluate different models? 🤔</p>
</div>
<div class="fragment">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/whole-game-resamples.jpg" class="quarto-figure quarto-figure-center" width="1772"></p>
</figure>
</div>
</div>
</div>
</div>
</section>
<section id="resampling" class="slide level2">
<h2>Resampling</h2>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li><p>Testing combinations of model and tuning parmaters also requires some combintation of <code>training</code>/<code>testing</code> splits.</p></li>
<li><p>Resampling methods, such as cross-validation and bootstraping, are empirical simulation systems that help facilitate this.</p></li>
<li><p>They create a series of data sets similar to the initial <code>training</code>/<code>testing</code> split.</p></li>
<li><p>In the first level of the diagram to the right, we first split the original data into <code>training</code>/<code>testing</code> sets. Then, the training set is chosen for resampling.</p></li>
</ul>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center" data-caption="This schematic from [Kuhn and Johnson (2019)](https://bookdown.org/max/FES/resampling.html) illustrates data usage for resampling methods">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/resampling.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="key-resampling-methods" class="slide level2">
<h2>Key Resampling Methods</h2>
<div class="callout callout-warning callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Warning</strong></p>
</div>
<div class="callout-content">
<p>Resampling is always used with the training set.</p>
</div>
</div>
</div>
<p>Resampling is a key step in model validation and assessment. The <code>rsample</code> package provides tools to create resampling strategies such as cross-validation, bootstrapping, and validation splits.</p>
<div class="fragment">
<ol type="1">
<li><strong>K-Fold Cross-Validation</strong>: The dataset is split into multiple “folds” (e.g., 5-fold or 10-fold), where each fold is used as a validation set while the remaining data is used for training.</li>
</ol>
</div>
<div class="fragment">
<ol start="2" type="1">
<li><strong>Bootstrap Resampling</strong>: Samples are drawn <em>with replacement</em> from the training dataset to generate multiple datasets, which used to train and test the model.</li>
</ol>
</div>
<div class="fragment">
<ol start="3" type="1">
<li><strong>Monte Carlo Resampling (Repeated Train-Test Splits)</strong>: Randomly splits data multiple times.</li>
</ol>
</div>
<div class="fragment">
<ol start="4" type="1">
<li><strong>Validation Split</strong>: Creates a single training and testing partition.</li>
</ol>
</div>
</section>
<section id="cross-validation" class="slide level2">
<h2>Cross-validation</h2>

<img data-src="https://www.tmwr.org/premade/three-CV.svg" class="r-stretch"></section>
<section id="cross-validation-1" class="slide level2">
<h2>Cross-validation</h2>

<img data-src="https://www.tmwr.org/premade/three-CV-iter.svg" class="r-stretch"></section>
<section id="cross-validation-2" class="slide level2">
<h2>Cross-validation <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="{columns}">
<div class="column" style="width:50%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb8"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb8-1"><a></a>penguins_train <span class="sc">|&gt;</span> <span class="fu">glimpse</span>() </span>
<span id="cb8-2"><a></a><span class="co">#&gt; Rows: 275</span></span>
<span id="cb8-3"><a></a><span class="co">#&gt; Columns: 7</span></span>
<span id="cb8-4"><a></a><span class="co">#&gt; $ species           &lt;fct&gt; Gentoo, Adelie, Gentoo, Chinstrap, Gentoo, Chinstrap…</span></span>
<span id="cb8-5"><a></a><span class="co">#&gt; $ island            &lt;fct&gt; Biscoe, Torgersen, Biscoe, Dream, Biscoe, Dream, Dre…</span></span>
<span id="cb8-6"><a></a><span class="co">#&gt; $ bill_length_mm    &lt;dbl&gt; 46.2, 43.1, 46.2, 45.9, 46.5, 48.1, 45.2, 55.9, 38.1…</span></span>
<span id="cb8-7"><a></a><span class="co">#&gt; $ bill_depth_mm     &lt;dbl&gt; 14.9, 19.2, 14.4, 17.1, 13.5, 16.4, 17.8, 17.0, 17.0…</span></span>
<span id="cb8-8"><a></a><span class="co">#&gt; $ flipper_length_mm &lt;int&gt; 221, 197, 214, 190, 210, 199, 198, 228, 181, 195, 20…</span></span>
<span id="cb8-9"><a></a><span class="co">#&gt; $ body_mass_g       &lt;int&gt; 5300, 3500, 4650, 3575, 4550, 3325, 3950, 5600, 3175…</span></span>
<span id="cb8-10"><a></a><span class="co">#&gt; $ sex               &lt;fct&gt; male, male, NA, female, female, female, female, male…</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a></a><span class="fu">nrow</span>(penguins_train) <span class="sc">*</span> <span class="dv">1</span><span class="sc">/</span><span class="dv">10</span></span>
<span id="cb9-2"><a></a><span class="co">#&gt; [1] 27.5</span></span>
<span id="cb9-3"><a></a></span>
<span id="cb9-4"><a></a><span class="fu">vfold_cv</span>(penguins_train, <span class="at">v =</span> <span class="dv">10</span>) <span class="co"># v = 10 is default</span></span>
<span id="cb9-5"><a></a><span class="co">#&gt; #  10-fold cross-validation </span></span>
<span id="cb9-6"><a></a><span class="co">#&gt; # A tibble: 10 × 2</span></span>
<span id="cb9-7"><a></a><span class="co">#&gt;    splits           id    </span></span>
<span id="cb9-8"><a></a><span class="co">#&gt;    &lt;list&gt;           &lt;chr&gt; </span></span>
<span id="cb9-9"><a></a><span class="co">#&gt;  1 &lt;split [247/28]&gt; Fold01</span></span>
<span id="cb9-10"><a></a><span class="co">#&gt;  2 &lt;split [247/28]&gt; Fold02</span></span>
<span id="cb9-11"><a></a><span class="co">#&gt;  3 &lt;split [247/28]&gt; Fold03</span></span>
<span id="cb9-12"><a></a><span class="co">#&gt;  4 &lt;split [247/28]&gt; Fold04</span></span>
<span id="cb9-13"><a></a><span class="co">#&gt;  5 &lt;split [247/28]&gt; Fold05</span></span>
<span id="cb9-14"><a></a><span class="co">#&gt;  6 &lt;split [248/27]&gt; Fold06</span></span>
<span id="cb9-15"><a></a><span class="co">#&gt;  7 &lt;split [248/27]&gt; Fold07</span></span>
<span id="cb9-16"><a></a><span class="co">#&gt;  8 &lt;split [248/27]&gt; Fold08</span></span>
<span id="cb9-17"><a></a><span class="co">#&gt;  9 &lt;split [248/27]&gt; Fold09</span></span>
<span id="cb9-18"><a></a><span class="co">#&gt; 10 &lt;split [248/27]&gt; Fold10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:50%;">
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://www.tmwr.org/premade/three-CV.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
<div class="cell" data-layout-align="center">
<div class="cell-output-display">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="https://www.tmwr.org/premade/three-CV-iter.svg" class="quarto-figure quarto-figure-center"></p>
</figure>
</div>
</div>
</div>
</div></div>
</section>
<section id="cross-validation-3" class="slide level2">
<h2>Cross-validation <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<p>What is in this?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb10"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb10-1"><a></a>penguins_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(penguins_train)</span>
<span id="cb10-2"><a></a>penguins_folds<span class="sc">$</span>splits[<span class="dv">1</span><span class="sc">:</span><span class="dv">3</span>]</span>
<span id="cb10-3"><a></a><span class="co">#&gt; [[1]]</span></span>
<span id="cb10-4"><a></a><span class="co">#&gt; &lt;Analysis/Assess/Total&gt;</span></span>
<span id="cb10-5"><a></a><span class="co">#&gt; &lt;247/28/275&gt;</span></span>
<span id="cb10-6"><a></a><span class="co">#&gt; </span></span>
<span id="cb10-7"><a></a><span class="co">#&gt; [[2]]</span></span>
<span id="cb10-8"><a></a><span class="co">#&gt; &lt;Analysis/Assess/Total&gt;</span></span>
<span id="cb10-9"><a></a><span class="co">#&gt; &lt;247/28/275&gt;</span></span>
<span id="cb10-10"><a></a><span class="co">#&gt; </span></span>
<span id="cb10-11"><a></a><span class="co">#&gt; [[3]]</span></span>
<span id="cb10-12"><a></a><span class="co">#&gt; &lt;Analysis/Assess/Total&gt;</span></span>
<span id="cb10-13"><a></a><span class="co">#&gt; &lt;247/28/275&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="callout callout-note callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Note</strong></p>
</div>
<div class="callout-content">
<p>Here is another example of a list column enabling the storage of non-atomic types in tibble</p>
</div>
</div>
</div>
<div class="callout callout-important callout-titled callout-style-default">
<div class="callout-body">
<div class="callout-title">
<div class="callout-icon-container">
<i class="callout-icon"></i>
</div>
<p><strong>Important</strong></p>
</div>
<div class="callout-content">
<p>Set the seed when creating resamples</p>
</div>
</div>
</div>
</section>
<section>
<section id="alternate-resampling-schemes" class="title-slide slide level1 center">
<h1>Alternate resampling schemes</h1>

</section>
<section id="bootstrapping" class="slide level2">
<h2>Bootstrapping</h2>

<img data-src="https://www.tmwr.org/premade/bootstraps.svg" class="r-stretch"></section>
<section id="bootstrapping-1" class="slide level2">
<h2>Bootstrapping <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a></a><span class="fu">set.seed</span>(<span class="dv">3214</span>)</span>
<span id="cb11-2"><a></a><span class="fu">bootstraps</span>(penguins_train)</span>
<span id="cb11-3"><a></a><span class="co">#&gt; # Bootstrap sampling </span></span>
<span id="cb11-4"><a></a><span class="co">#&gt; # A tibble: 25 × 2</span></span>
<span id="cb11-5"><a></a><span class="co">#&gt;    splits            id         </span></span>
<span id="cb11-6"><a></a><span class="co">#&gt;    &lt;list&gt;            &lt;chr&gt;      </span></span>
<span id="cb11-7"><a></a><span class="co">#&gt;  1 &lt;split [275/96]&gt;  Bootstrap01</span></span>
<span id="cb11-8"><a></a><span class="co">#&gt;  2 &lt;split [275/105]&gt; Bootstrap02</span></span>
<span id="cb11-9"><a></a><span class="co">#&gt;  3 &lt;split [275/108]&gt; Bootstrap03</span></span>
<span id="cb11-10"><a></a><span class="co">#&gt;  4 &lt;split [275/111]&gt; Bootstrap04</span></span>
<span id="cb11-11"><a></a><span class="co">#&gt;  5 &lt;split [275/102]&gt; Bootstrap05</span></span>
<span id="cb11-12"><a></a><span class="co">#&gt;  6 &lt;split [275/98]&gt;  Bootstrap06</span></span>
<span id="cb11-13"><a></a><span class="co">#&gt;  7 &lt;split [275/92]&gt;  Bootstrap07</span></span>
<span id="cb11-14"><a></a><span class="co">#&gt;  8 &lt;split [275/97]&gt;  Bootstrap08</span></span>
<span id="cb11-15"><a></a><span class="co">#&gt;  9 &lt;split [275/100]&gt; Bootstrap09</span></span>
<span id="cb11-16"><a></a><span class="co">#&gt; 10 &lt;split [275/99]&gt;  Bootstrap10</span></span>
<span id="cb11-17"><a></a><span class="co">#&gt; # ℹ 15 more rows</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="monte-carlo-cross-validation" class="slide level2">
<h2>Monte Carlo Cross-Validation <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb12"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb12-1"><a></a><span class="fu">set.seed</span>(<span class="dv">322</span>)</span>
<span id="cb12-2"><a></a><span class="fu">mc_cv</span>(penguins_train, <span class="at">times =</span> <span class="dv">10</span>)</span>
<span id="cb12-3"><a></a><span class="co">#&gt; # Monte Carlo cross-validation (0.75/0.25) with 10 resamples  </span></span>
<span id="cb12-4"><a></a><span class="co">#&gt; # A tibble: 10 × 2</span></span>
<span id="cb12-5"><a></a><span class="co">#&gt;    splits           id        </span></span>
<span id="cb12-6"><a></a><span class="co">#&gt;    &lt;list&gt;           &lt;chr&gt;     </span></span>
<span id="cb12-7"><a></a><span class="co">#&gt;  1 &lt;split [206/69]&gt; Resample01</span></span>
<span id="cb12-8"><a></a><span class="co">#&gt;  2 &lt;split [206/69]&gt; Resample02</span></span>
<span id="cb12-9"><a></a><span class="co">#&gt;  3 &lt;split [206/69]&gt; Resample03</span></span>
<span id="cb12-10"><a></a><span class="co">#&gt;  4 &lt;split [206/69]&gt; Resample04</span></span>
<span id="cb12-11"><a></a><span class="co">#&gt;  5 &lt;split [206/69]&gt; Resample05</span></span>
<span id="cb12-12"><a></a><span class="co">#&gt;  6 &lt;split [206/69]&gt; Resample06</span></span>
<span id="cb12-13"><a></a><span class="co">#&gt;  7 &lt;split [206/69]&gt; Resample07</span></span>
<span id="cb12-14"><a></a><span class="co">#&gt;  8 &lt;split [206/69]&gt; Resample08</span></span>
<span id="cb12-15"><a></a><span class="co">#&gt;  9 &lt;split [206/69]&gt; Resample09</span></span>
<span id="cb12-16"><a></a><span class="co">#&gt; 10 &lt;split [206/69]&gt; Resample10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="validation-set" class="slide level2">
<h2>Validation set <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a></a><span class="fu">set.seed</span>(<span class="dv">853</span>)</span>
<span id="cb13-2"><a></a>penguins_val_split <span class="ot">&lt;-</span> <span class="fu">initial_validation_split</span>(penguins)</span>
<span id="cb13-3"><a></a>penguins_val_split</span>
<span id="cb13-4"><a></a><span class="co">#&gt; &lt;Training/Validation/Testing/Total&gt;</span></span>
<span id="cb13-5"><a></a><span class="co">#&gt; &lt;199/67/67/333&gt;</span></span>
<span id="cb13-6"><a></a><span class="fu">validation_set</span>(penguins_val_split)</span>
<span id="cb13-7"><a></a><span class="co">#&gt; # A tibble: 1 × 2</span></span>
<span id="cb13-8"><a></a><span class="co">#&gt;   splits           id        </span></span>
<span id="cb13-9"><a></a><span class="co">#&gt;   &lt;list&gt;           &lt;chr&gt;     </span></span>
<span id="cb13-10"><a></a><span class="co">#&gt; 1 &lt;split [199/67]&gt; validation</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<div class="fragment">
<p>A validation set is just another type of resample</p>
</div>
</section>
<section id="the-whole-game---status-update" class="slide level2">
<h2>The whole game - status update</h2>

<img data-src="images/whole-game-transparent-resamples.jpg" class="quarto-figure quarto-figure-center r-stretch" width="1772"></section>
<section id="section-1" class="slide level2" data-background-iframe="https://rsample.tidymodels.org/reference/index.html">
<h2></h2>
<div class="footer">

</div>
</section></section>
<section>
<section id="unit-example" class="title-slide slide level1 center" data-background-image="images/oregon-forest.png" data-background-opacity=".5">
<h1>Unit Example</h1>
<p>Can we predict if a plot of land is forested? - Interested in classification models - We have a dataset of 7,107 6000-acre hexagons in Washington state. - Each hexagon has a nominal outcome, <code>forested</code>, with levels <code>"Yes"</code> and <code>"No"</code>.</p>
</section>
<section id="data-on-forests-in-washington" class="slide level2">
<h2>Data on forests in Washington</h2>
<div class="columns">
<div class="column" style="width:60%;">
<ul>
<li>The U.S. Forest Service maintains ML models to predict whether a plot of land is “forested.”</li>
<li>This classification is important for all sorts of research, legislation, and land management purposes.</li>
<li>Plots are typically remeasured every 10 years and this dataset contains the most recent measurement per plot.</li>
<li>Type <code>?forested</code> to learn more about this dataset, including references.</li>
</ul>
</div><div class="column" style="width:40%;">
<p><img data-src="images/forest_mountain.svg"></p>
</div></div>
<div class="footer">
<p>Credit: <a href="https://www.svgrepo.com/svg/251793/forest-mountain" class="uri">https://www.svgrepo.com/svg/251793/forest-mountain</a></p>
</div>
</section>
<section id="data-on-forests-in-washington-1" class="slide level2">
<h2>Data on forests in Washington</h2>
<div class="columns">
<div class="column" style="width:70%;">
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a></a><span class="fu">library</span>(forested)</span>
<span id="cb14-2"><a></a><span class="fu">dim</span>(forested)</span>
<span id="cb14-3"><a></a><span class="co">#&gt; [1] 7107   19</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li><p>One observation from each of 7,107 6000-acre hexagons in Washington state.</p></li>
<li><p>A nominal outcome, <code>forested</code>, with levels <code>"Yes"</code> and <code>"No"</code>, measured “on-the-ground.”</p></li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a></a><span class="fu">table</span>(forested<span class="sc">$</span>forested)</span>
<span id="cb15-2"><a></a><span class="co">#&gt; </span></span>
<span id="cb15-3"><a></a><span class="co">#&gt;  Yes   No </span></span>
<span id="cb15-4"><a></a><span class="co">#&gt; 3894 3213</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<ul>
<li>18 remotely-sensed and easily-accessible predictors:</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a></a><span class="fu">names</span>(forested)</span>
<span id="cb16-2"><a></a><span class="co">#&gt;  [1] "forested"         "year"             "elevation"        "eastness"        </span></span>
<span id="cb16-3"><a></a><span class="co">#&gt;  [5] "northness"        "roughness"        "tree_no_tree"     "dew_temp"        </span></span>
<span id="cb16-4"><a></a><span class="co">#&gt;  [9] "precip_annual"    "temp_annual_mean" "temp_annual_min"  "temp_annual_max" </span></span>
<span id="cb16-5"><a></a><span class="co">#&gt; [13] "temp_january_min" "vapor_min"        "vapor_max"        "canopy_cover"    </span></span>
<span id="cb16-6"><a></a><span class="co">#&gt; [17] "lon"              "lat"              "land_type"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</div><div class="column" style="width:30%;">
<p><img data-src="images/forest.svg" class="center"></p>
</div></div>
<div class="footer">
<p>Credit: <a href="https://www.svgrepo.com/svg/67614/forest" class="uri">https://www.svgrepo.com/svg/67614/forest</a></p>
</div>
</section>
<section id="data-splitting-and-spending" class="slide level2">
<h2>Data splitting and spending</h2>
<h3 id="the-initial-split">The initial split <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h3>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb17-2"><a></a>forested_split <span class="ot">&lt;-</span> <span class="fu">initial_split</span>(forested, <span class="at">prop =</span> .<span class="dv">8</span>, <span class="at">strata =</span> tree_no_tree)</span>
<span id="cb17-3"><a></a>forested_split</span>
<span id="cb17-4"><a></a><span class="co">#&gt; &lt;Training/Testing/Total&gt;</span></span>
<span id="cb17-5"><a></a><span class="co">#&gt; &lt;5685/1422/7107&gt;</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="accessing-the-data-1" class="slide level2">
<h2>Accessing the data <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a></a>forested_train <span class="ot">&lt;-</span> <span class="fu">training</span>(forested_split)</span>
<span id="cb18-2"><a></a>forested_test  <span class="ot">&lt;-</span> <span class="fu">testing</span>(forested_split)</span>
<span id="cb18-3"><a></a></span>
<span id="cb18-4"><a></a><span class="fu">nrow</span>(forested_train)</span>
<span id="cb18-5"><a></a><span class="co">#&gt; [1] 5685</span></span>
<span id="cb18-6"><a></a><span class="fu">nrow</span>(forested_test)</span>
<span id="cb18-7"><a></a><span class="co">#&gt; [1] 1422</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="k-fold-cross-validation" class="slide level2">
<h2>K-Fold Cross-Validation <img data-src="hexes/rsample.png" class="absolute" style="top: -20px; right: 0px; width: 64px; height: 74.24px; "></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb19"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb19-1"><a></a><span class="co"># Load the dataset</span></span>
<span id="cb19-2"><a></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb19-3"><a></a></span>
<span id="cb19-4"><a></a><span class="co"># Create a 10-fold cross-validation object</span></span>
<span id="cb19-5"><a></a>(cv_folds <span class="ot">&lt;-</span> <span class="fu">vfold_cv</span>(forested_train, <span class="at">v =</span> <span class="dv">10</span>))</span>
<span id="cb19-6"><a></a><span class="co">#&gt; #  10-fold cross-validation </span></span>
<span id="cb19-7"><a></a><span class="co">#&gt; # A tibble: 10 × 2</span></span>
<span id="cb19-8"><a></a><span class="co">#&gt;    splits             id    </span></span>
<span id="cb19-9"><a></a><span class="co">#&gt;    &lt;list&gt;             &lt;chr&gt; </span></span>
<span id="cb19-10"><a></a><span class="co">#&gt;  1 &lt;split [5116/569]&gt; Fold01</span></span>
<span id="cb19-11"><a></a><span class="co">#&gt;  2 &lt;split [5116/569]&gt; Fold02</span></span>
<span id="cb19-12"><a></a><span class="co">#&gt;  3 &lt;split [5116/569]&gt; Fold03</span></span>
<span id="cb19-13"><a></a><span class="co">#&gt;  4 &lt;split [5116/569]&gt; Fold04</span></span>
<span id="cb19-14"><a></a><span class="co">#&gt;  5 &lt;split [5116/569]&gt; Fold05</span></span>
<span id="cb19-15"><a></a><span class="co">#&gt;  6 &lt;split [5117/568]&gt; Fold06</span></span>
<span id="cb19-16"><a></a><span class="co">#&gt;  7 &lt;split [5117/568]&gt; Fold07</span></span>
<span id="cb19-17"><a></a><span class="co">#&gt;  8 &lt;split [5117/568]&gt; Fold08</span></span>
<span id="cb19-18"><a></a><span class="co">#&gt;  9 &lt;split [5117/568]&gt; Fold09</span></span>
<span id="cb19-19"><a></a><span class="co">#&gt; 10 &lt;split [5117/568]&gt; Fold10</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="assignment" class="slide level2">
<h2>Assignment</h2>
<ol type="1">
<li><p>Review these slides ~ 1 - 53 <a href="https://mikejohnson51.github.io/csu-ess-330/slides/15-ml-intro.html#/">here</a> for a brief overview of where we have been.</p></li>
<li><p>Execute the following process:</p>
<ol type="a">
<li>Open an R script (extension .R)</li>
<li>Load the <code>tidymodels</code> package and the <code>penguins</code> dataset</li>
<li>Set a seed (<code>set.seed()</code>)</li>
<li>Split the data into training/testing sets with a proportion of 70%/30% split</li>
<li>Extract the training and test <code>tibbles</code> into unique objects</li>
<li>Create a 10 fold cross validation dataset based on the training data</li>
</ol></li>
<li><p>Submit your R script to Canvas, this we be built on on Wednesday.</p></li>
</ol>


</section></section>
    </div>
  <div class="quarto-auto-generated-content" style="display: none;">
<p><img src="../csu-rams-logo.png" class="slide-logo"></p>
<div class="footer footer-default">
<p><a href="https://github.com/mikejohnson51/csu-ess-330/">ESS 330: Quantitative Reasoning for Ecosystem Science</a></p>
</div>
</div></div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="../site_libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="../site_libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="../site_libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="../site_libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="../site_libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="../site_libs/revealjs/plugin/notes/notes.js"></script>
  <script src="../site_libs/revealjs/plugin/search/search.js"></script>
  <script src="../site_libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="../site_libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'jumpToSlide': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.togglePdfExport(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleScrollView(event)\"><kbd>r</kbd> Scroll View Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': true,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1280,

        height: 720,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    <script>
      Reveal.addEventListener( 'slidechanged', function( event ) {
        console.log("hello")
        
        slide_id = event.currentSlide.id
        link = "annotations" + ".html#" + slide_id
        
        var annotation_div = document.createElement('div')
        annotation_div.setAttribute("class", "annotation-link")
        
        var notes_link = document.createElement('a')
        notes_link.setAttribute("href", link)
        notes_link.setAttribute("target", "_blank")
        
        var iii = document.createElement('i')
        iii.setAttribute("class", "fa fa-info")
        notes_link.appendChild(iii)
        
        annotation_div.appendChild(notes_link)
        
        var tmp = event.currentTarget.getElementsByClassName("annotation-link")
        if (tmp.length === 1) {
          tmp[0].remove()
        }
        
        if (event.currentSlide.classList.contains("annotation")) {
          event.currentTarget.append(annotation_div)
        }
      } );

    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const isCodeAnnotation = (el) => {
        for (const clz of el.classList) {
          if (clz.startsWith('code-annotation-')) {                     
            return true;
          }
        }
        return false;
      }
      const onCopySuccess = function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      }
      const getTextToCopy = function(trigger) {
          const codeEl = trigger.previousElementSibling.cloneNode(true);
          for (const childEl of codeEl.children) {
            if (isCodeAnnotation(childEl)) {
              childEl.remove();
            }
          }
          return codeEl.innerText;
      }
      const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
        text: getTextToCopy
      });
      clipboard.on('success', onCopySuccess);
      if (window.document.getElementById('quarto-embedded-source-code-modal')) {
        const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
          text: getTextToCopy,
          container: window.document.getElementById('quarto-embedded-source-code-modal')
        });
        clipboardModal.on('success', onCopySuccess);
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
        var mailtoRegex = new RegExp(/^mailto:/);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
     	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
            // undo the damage that might have been done by quarto-nav.js in the case of
            // links that we want to consider external
            if (link.dataset.originalHref !== undefined) {
              link.href = link.dataset.originalHref;
            }
          }
        }
      function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
        const config = {
          allowHTML: true,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'light-border',
          placement: 'bottom-start',
        };
        if (contentFn) {
          config.content = contentFn;
        }
        if (onTriggerFn) {
          config.onTrigger = onTriggerFn;
        }
        if (onUntriggerFn) {
          config.onUntrigger = onUntriggerFn;
        }
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          if (note) {
            return note.innerHTML;
          } else {
            return "";
          }
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
    });
    </script>
    

</body></html>